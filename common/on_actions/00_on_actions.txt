#When adding effects directly in on_actions always consider if it would be best to do so through a scripted effect. on_actions with a lot of script in them are harder to get an overview of.

# country
on_startup = {
    events = {
		muslim_school_events.20 #Pick School
	}
	#if = {			#Paradox Fucked Up Janissary
		#limit = {
			#has_dlc = "Cradle of Civilization"
			#has_country_modifier = tur_janissary
		#}
		#remove_country_modifier = tur_janissary
	#}
	if = {
		limit = {
			ai = no 
			NOT = { has_global_flag = cu_start }
		}
		country_event = { id = custart.9 }
	}
	initialize_schools_effect = yes #This is only used here but is used for readability of on_action file.
    if = {
		limit = {
			NOT = { has_global_flag = cu_start }
		}
		country_event = { id = custart.00 }
		1 = { #Global Variable is saved in province id 1
		    set_province_flag = cu_global_variable_prov
			set_variable = { which = cu_year value = 0 } #Current Year
			cu_initial_year = yes
			
		}
		every_country = {
				cu_correct_year = yes
		        set_variable = { which = cabinet_ca value = 60 } #Default value of min administrative integrity for cabinet to invest in a province.
		        set_variable = { which = literacy value = 0 } #Literacy
				set_variable = { which = num_pp value = 0 } #Province of Accepted Cultures
				set_variable = { which = ave_literacy value = 1 } #Average Literacy
				set_variable = { which = sum_literacy value = 0 } #Total Literacy(For calculation only)
				set_variable = { which = num_of_tc value = 0 } #Num of Trading Companies
			    set_variable = { which = inflation_index value = 100 } #Inflation Ratio
				set_variable = { which = cu_ra_w value = 0 } #Ruler Military Achievement
				set_variable = { which = cu_ra_ws value = 0 } #Ruler Military Achievement(Sum)
				set_variable = { which = cu_ra_wsd value = 0 } #Ruler Military Achievement(Display)
				set_variable = { which = ruler_gc value = 0 }
				set_variable = { which = cabinet_cash value = 0 }
				set_variable = { which = cabinet_adm value = 0 }
				set_variable = { which = cabinet_dip value = 0 }
				set_variable = { which = cabinet_mil value = 0 }
				set_variable = { which = nb_unrest value = 0 }
				set_variable = { which = el_unrest value = 0 }
				set_variable = { which = bg_unrest value = 0 }
				set_variable = { which = ch_unrest value = 0 }
				set_variable = { which = basetax value = 4.9 }	#Trade System
				set_variable = { which = baseefficiency value = 1.2 }	#Trade System
				set_variable = { which = cu_st_growth_n value = 0 }	#Stability Growth(normal)
				set_variable = { which = cu_st_growth_e value = 0 } #Stability Growth(estate)
				set_variable = { which = cu_st_growth value = 0 } #Stability Growth(total)
				set_variable = { which = cu_st_point value = 40 }	#Stability Points(Start at middle)
				set_country_flag = cu_stability_fixed
				cu_check_stability_point = yes #Display Stability Cost
				#Cultural Power
				set_variable = { which = art_power_c value = 0 } #Country Art Power
				set_variable = { which = art_legacy value = 0 } #Historical Art Power
				set_variable = { which = art_piece_on_sale value = 0 } #Art Piece in the market
				#Set Cabinet Parameters To Default
				set_variable = { which = cabinet_p_province value = -1 }
		        set_variable = { which = cabinet_p_province_d value = 0 }
		        set_variable = { which = cabinet_p_province_bn value = 0 }
		        set_variable = { which = cabinet_p_province_ba value = 0 }
		        set_variable = { which = cabinet_p_province_bg value = 0 }
		        set_variable = { which = cabinet_p_province_bp value = 0 }
		        set_variable = { which = cabinet_p_province_bt value = 0 }
		        set_variable = { which = cabinet_p_province_bl value = 0 }
				#End
				add_country_modifier = {
					name = cu_country_initialized
					duration = -1
					hidden = yes
				}
				set_country_flag = cu_stability_fixed 
				#set_country_flag = cu_calc_estate_influence
				#cu_calc_countrywide_pop_efficiency = yes
				country_event = { id = cugovernment.1 days = 15 } #Government Capacity Calculation
				if = {
					limit = {
						has_regency = yes
					}
					set_country_flag = regent_ruler
				}
				#Turkish Culture
			    if = {
			       limit = { primary_culture = yorukish }
				   change_primary_culture = turkish
			    }
				
				#French minor culture
				if = {
					limit = {
						tag = FRA
						adm_tech = 10
					}
					set_country_flag = french_lingua_franca_promoted
					every_owned_province = {
						if = {
							limit = {
								OR = {
									culture = occitain
									culture = gascon
									culture = aquitaine
									culture = breton
								}
							}
							add_province_modifier = {
								name = french_lingua_franca_prov
								duration = -1
							}
							cu_calc_base_cultural_acceptance = yes
							cu_assimilate_into_culture_group = yes
						}
					}
				}
				
				if = {
				   limit = { is_emperor_of_china = yes }
		           add_faction = bureaucrats
				   add_faction = temples
		           add_faction = enuchs
				   add_faction_influence = {
			           faction = enuchs
			           influence = 25
		           }
				   add_faction_influence = {
			           faction = temples
			           influence = 15
		           }
				}
				if = {
					limit = {
						tag = KOR
					}
					add_country_modifier = {
						name = korea_in_trouble
						duration = -1
					}
				}
				if = {
				      limit = { 
					          ai = no  
					  }
					  if = {
					         limit = { NOT = { has_global_flag = cu_host_set } }
					         set_global_flag = cu_host_set
					         set_country_flag = cu_host
					  }
					  else_if = { #Multiplayer mode
					         limit = { NOT = { has_country_flag = cu_host } }
							 set_global_flag = cu_x_handicap_set
	                         set_global_flag = cu_handicap_set
	                         set_global_flag = cu_fast_mode
			                 set_global_flag = cu_multiplayer_mode
					  }
				}
				if = {
					limit = { mercantilism = 25 } 
					add_mercantilism = -100
					add_mercantilism = 50
					add_government_reform = trade_policy_3
				}
				else_if = {
					limit = { is_emperor_of_china = yes }
					add_mercantilism = -100
					add_mercantilism = 90
					add_government_reform = trade_policy_1
				}
				else_if = {
					limit = { 
							tag = KOR 
							culture_group = japanese_g
							}
					add_mercantilism = -100
					add_mercantilism = 75
					add_government_reform = trade_policy_2
				}
				else = {
					add_mercantilism = -100
					add_mercantilism = 35
					add_government_reform = trade_policy_3
				}
				if = {
					limit = { ai = yes }
					add_yearly_manpower = 2.5
				}
		}
        
		
	    
		every_province = {
			if = {
				limit = { is_empty = no }
				set_variable = { which = cabinet_ca which = owner }
			}
			cu_switch_hybrid_culture = yes
			
			#Tusi Administration
			if = {
				limit = {
					region = xinan_region
					owner = { is_emperor_of_china = yes }
					NOT = { has_owner_religion = yes }
					NOT = { culture_group = east_asian }
					NOT = { is_year = 1731 } #Tusi abolished
				}
				add_permanent_province_modifier = {
					name = tusi_administration
					duration = -1
				}
			}
			#Indian Cast System
				if = {
				       limit = {
							AND = {							
								OR = {
									culture_group = eastern_aryan
									culture_group = hindusthani
									culture_group = western_aryan
									culture_group = dravidian
									culture_group = central_indic
									}
								OR = {
									region = hindusthan_region
									region = bengal_region
									region = west_india_region
									region = deccan_region
									region = coromandel_region
								}
							} 
					   }
				       add_permanent_province_modifier = {
					        name = indian_caste_system
					        duration = -1
				       }
				}
				
			#Russian Krepost
			if = {
				limit = {
					owned_by = RUS
					OR = {
						region = west_siberia_region
						region = east_siberia_region
						region = ural_region
						region = cascadia_region
						has_climate = arctic
					}
					is_year = 1600
				}
				add_province_modifier = {
					    name = russian_krepost_modifier
						duration = -1
				}
			}

			#Celestial Empire should be one country
				if = {
					limit = {
						culture_group = east_asian
						owner = {
							OR = {
								has_reform = celestial_empire
								has_reform = celestial_empire_2
								has_reform = celestial_empire_3
							}
						}
					}
					every_core_country = { 
						limit = {
							exists = no
						}
						PREV = {
							remove_core = PREV
						}
					}
				}


			cu_province_initialization = yes
			cu_set_historical_nationalism = yes
			set_province_flag = initialize_base_ca #triggers base calc
			add_province_triggered_modifier = cu_terr_abandon
        }
		
		#Province 1 is used to store global variable
		1 = {
			set_variable = { which = wokou_strength value = 15 }
			if = {
				limit = { is_year = 1644 }
				change_variable = { which = wokou_strength value = -15 }
			}
			else_if = {
				limit = { is_year = 1567 }
				change_variable = { which = wokou_strength value = -5 }
			}
		}
		#Some provinces have starting art buildings and start with art piece
		183 = { #Paris - Notre Dome
		     add_permanent_province_modifier = {
			         name = cu_notre_dome
					 duration = -1
			 }
		     change_variable = { which = cu_art_slot value = 1 }
		     change_variable = { which = cu_art_piece value = 1 }
			 change_variable = { which = cu_art_piece1 value = 1 }
			 change_variable = { which = cu_theatre value = 1 }
			 change_variable = { which = cu_salon value = 1 }
			 change_variable = { which = art_power_wonder value = 4 }
		}
		1816 = { #Beijing - The Forbidden City
		     add_permanent_province_modifier = {
				      name = cu_forbidden_palace
				      duration = -1
             }
		     change_variable = { which = cu_art_slot value = 2 }
		     change_variable = { which = cu_art_piece value = 2 }
			 change_variable = { which = cu_art_piece1 value = 1 }
			 change_variable = { which = cu_art_piece2 value = 1 }
			 change_variable = { which = art_power_wonder value = 4 }
		}
		151 = { #Constantinople - Hagia Sophia
		     add_permanent_province_modifier = {
				      name = cu_hagia_sophia
				      duration = -1
             }
			 change_variable = { which = cu_art_slot value = 2 }
		     change_variable = { which = cu_art_piece value = 2 }
			 change_variable = { which = cu_art_piece1 value = 1 }
			 change_variable = { which = cu_art_piece2 value = 1 }
			 change_variable = { which = art_power_wonder value = 4 }
		}
		112 = { #Vebezua - Piazza San Marco
		     add_permanent_province_modifier = {
				      name = cu_piazza_san_marco
				      duration = -1
             }
			 change_variable = { which = cu_art_slot value = 1 }
			 change_variable = { which = art_power_wonder value = 4 }
		}
		134 = { #Wien
		     change_variable = { which = cu_art_piece value = 1 }
			 change_variable = { which = cu_art_piece1 value = 1 }
		}
		118 = { #Roma
		     change_variable = { which = cu_art_piece value = 1 }
			 change_variable = { which = cu_art_piece2 value = 1 }
		}
		
		379 = { #Jerusalem
		     add_permanent_province_modifier = {
				      name = cu_dome_of_the_rock
				      duration = -1
             }
			 change_variable = { which = cu_art_slot value = 1 }
		     change_variable = { which = cu_art_piece value = 1 }
			 change_variable = { which = cu_art_piece2 value = 1 }
			 change_variable = { which = art_power_wonder value = 4 }
		}
		
		382 = { #Damascus - Umayyad Mosque
		     add_permanent_province_modifier = {
				      name = cu_umayyad_mosque
				      duration = -1
             }
		     change_variable = { which = cu_art_slot value = 1 }
		     change_variable = { which = cu_art_piece value = 1 }
			 change_variable = { which = cu_art_piece2 value = 1 }
			 change_variable = { which = art_power_wonder value = 4 }
		}
		
		385 = { #Mecca
		     change_variable = { which = cu_art_piece value = 1 }
			 change_variable = { which = cu_art_piece2 value = 1 }
		}
		
		454 = { #Samarkand
		     change_variable = { which = cu_art_piece value = 1 }
			 change_variable = { which = cu_art_piece1 value = 1 }
		}
		
		4399 = { #Dagon - Shwedagon Pagoda
		     add_permanent_province_modifier = {
				      name = cu_shwedagon_pagoda
				      duration = -1
                 }
		     change_variable = { which = cu_art_slot value = 4 }
		     change_variable = { which = cu_art_piece value = 4 }
			 change_variable = { which = cu_art_piece0 value = 4 }
			 change_variable = { which = art_power_wonder value = 2 }
		}

		808 = { #Machu Pichu
		    if = {
			      limit = { is_year = 1475 }
				  add_permanent_province_modifier = {
				      name = cu_machu_picchu
				      duration = -1
                  }
			     change_variable = { which = art_power_wonder value = 5 }
			}
		           
		}
		
		852 = { # The Great Pyramid of Tenochtitlan
		   if = {
			      limit = { NOT = { is_year = 1521 }}
			add_permanent_province_modifier = {
				name = cu_templo_mayor_tenochtitlan
				duration = -1
			}
			change_variable = { which = art_power_wonder value = 5 }
			}
		}
		
		846 = { #Yucatan - Chichen Itza		     
			 change_variable = { which = art_power_wonder value = 4 }
		}
		
		2212 = { #Zanjan - Takht-e Soleyman	             		
			 change_variable = { which = art_power_wonder value = 4 }
		}
		
		2690 = { # java - borobudur temple
		       add_permanent_province_modifier = {
				      name = cu_borobudur_temple
				      duration = -1
             }
		     change_variable = { which = cu_art_slot value = 2 }		     
			 	 change_variable = { which = art_power_wonder value = 3 }
		}
		
		1134 = { #Djenne - Great Mosque of Djenne
		     add_permanent_province_modifier = {
				      name = cu_great_mosque_of_djenne
				      duration = -1
             }
		     change_variable = { which = cu_art_slot value = 1 }
		     change_variable = { which = cu_art_piece value = 1 }
			 change_variable = { which = cu_art_piece0 value = 1 }
			 change_variable = { which = art_power_wonder value = 3 }
		}
		
		1227 = { #Aksum - Chapel of the Tablet
		     add_province_triggered_modifier = cu_the_chapel_of_the_tablet
		     change_variable = { which = cu_art_slot value = 1 }
		     change_variable = { which = cu_art_piece value = 1 }
			 change_variable = { which = cu_art_piece1 value = 1 }
			 change_variable = { which = art_power_wonder value = 4 }
		}
		
		1832 = { #Yamato(Nara) - Kofuku-ji
		     add_permanent_province_modifier = {
				      name = cu_kofukuji_naru
				      duration = -1
             }
		     change_variable = { which = cu_art_slot value = 1 }
		     change_variable = { which = cu_art_piece value = 1 }
			 change_variable = { which = cu_art_piece1 value = 1 }
			 change_variable = { which = art_power_wonder value = 4 }
		}
		
		1821 = { #Nanjing
		    if = {
			      limit = { NOT = { is_year = 1644 } }
				  add_province_modifier = {
				      name = second_capital
				      duration = -1
                  }	
					set_province_flag = second_capital_f
			}
		           
		}
		
	    every_country = {				
		        set_country_flag = cu_stability_fixed #Prevent Government Reform from reducing stability
		        add_years_of_income = -0.3
				add_yearly_manpower = 2
				if = {
				     limit = { tag = MNG }
				     add_treasury = -300
					 set_country_flag = has_a_second_capital	
					 if = {
							limit = {
								NOT = { is_year = 1567 } #Longqing dynasty removed sea ban
							}
							add_country_modifier = {
								name = sea_trade_banned
								duration = -1
							}
					 }
				}
				else_if = {
					limit = { 
							tag = QNG 
							is_year = 1644
					}
					add_country_modifier = {
								name = sea_trade_banned
								duration = -1
					}
				}
				else_if = {
					limit = { 
					    tag = RUS 
						is_year = 1600
					}
					set_country_flag = russian_krepost
				}
				else_if = {
					limit = {
						tag = TUR
						owns = 151
					}
					add_country_modifier = {
						name = tur_roman_path
						duration = -1
					}
					if = {
						limit = { NOT = { is_year = 1800 } }
						every_owned_province = {
							limit = { culture = greek }
							cu_calc_base_cultural_acceptance = yes
							set_variable = { which = cu_var1 value = 10 }
							cu_add_cultural_acceptance = yes
						}
					}
				}
				#country_event = { id = urban.971 } #Average Literacy
				country_event = { id = urban.97 } #Literacy
				country_event = { id = urban.99 } #Urbanization
                country_event = { id = cugovernment.1 }	#Government Capacity
				if = {
				      limit = { ai = no }
					  set_country_flag = cu_human_yearly_pulse
				}
                #country_event = { id = custart.05 }   #Local Garrison
                set_variable = { which = land_reform_acceptance value = 0 } #Celestial Empire	
                set_variable = { which = prodution_reform_acceptance value = 0 } #Celestial Empire
                set_variable = { which = army_reform_acceptance value = 0 } #Celestial Empire	
                set_variable = { which = trade_reform_acceptance value = 0 } #Celestial Empire
                set_variable = { which = diplo_reform_acceptance value = 0 } #Celestial Empire		

				
				#Give Human Player a Capital Fort so player has enough forcelimit to siege a province.
			if = {
			      limit = { 
				           ai = no
						   capital_scope = {
						       NOT = {
						          has_building = fort_15th
								  has_building = fort_16th
								  has_building = fort_17th
								  has_building = fort_18th
						       }
						   }
				  }
				  capital_scope = {
				        add_building = fort_15th
				  }
			}
			if = {
			      limit = { government = native }
				  change_government = tribal
				  add_government_reform = siberian_tribe
			}
			if = {
			      limit = { primitives = yes }
				  #set_primitive = no
			}
			
				#Conscription law for specific countries
                if = {
						limit = { 
							OR = {
							    AND = {
									tag = FRA
									is_year = 1490
									NOT = { is_year = 1644 }
								}
								AND = {
									tag = NED
									is_year = 1589
								 }
							}
											 
							NOT = { is_year = 1750 }
						}
						add_government_reform = volunteer_training
						set_country_flag = change_conscription_law
						add_army_tradition = 10
				}	
				if = {
						limit = { 
							OR = {
								culture_group = east_asian
								tag = QNG
								tag = KOR
							}
										
						}
						add_government_reform = military_household
						set_country_flag = change_conscription_law
				}
				if = {
						limit = { 
							AND = {
									tag = SWE
									is_year = 1618
							}
							AND = {
									tag = ENG
									is_year = 1644
							}
                            AND = {
									tag = FRA
									is_year = 1644
									NOT = { is_year = 1790 }
							}							
						}
						add_government_reform = standing_army
						set_country_flag = change_conscription_law
						add_army_tradition = 20
				}
				if = {
						limit = { 
							tag = PRU
                            is_year = 1750
                            NOT = { is_year = 1763 }							
						}
						add_government_reform = extensive_conscription
						set_country_flag = change_conscription_law
						add_army_tradition = 60
				}
				if = {
						limit = { 
							tag = PRU
                            is_year = 1700
                            OR = {
							        NOT = { is_year = 1750 }
                                    is_year = 1763
                            }									
						}
						add_government_reform = limited_conscription
						set_country_flag = change_conscription_law
						add_army_tradition = 40
				}
				if = {
						limit = { 
							tag = FRA
                            is_year = 1790								
						}
						add_government_reform = limited_conscription
						set_country_flag = change_conscription_law
						add_army_tradition = 50
				}
				
				#...and for generic countries
				if = {
				        limit = { 
					        NOT = { 
					               has_country_flag = change_conscription_law
					        } 
					    }
						if = {
						      limit = { 
							            OR = {
 										    capital_scope = { 
										       continent = europe 
										    }
											mil_tech = 20 #This is for western colonial nations
										}
							  }
							  if = {
							        limit = { 
									        OR = {
											      government = republic
                                                  capital_scope = {
												         region = italy_region
                                                  }
                                                  tag = SWI
												  tag = BYZ
                                            }												  
											NOT = { is_year = 1700 }	 
									}
									add_government_reform = mercenary_conscription
						            set_country_flag = change_conscription_law
							  }
							  if = {
							        limit = { 
									        is_year = 1700	 											
											OR = { 
											     religion = catholic
                                                 religion = reformed												 
												 religion = protestant
											}	 
									}
									add_government_reform = standing_army
						            set_country_flag = change_conscription_law
							  }
							  if = {
							        limit = { 
									        is_year = 1800 											
											NOT = { 
											     religion = catholic
                                                 religion = reformed												 
												 religion = protestant
											}	 
									}
									add_government_reform = standing_army
						            set_country_flag = change_conscription_law
							  }
						}
						
						if = {
						      limit = { 
							            OR = {										    											
											government = native
											government = tribal											
										}
							  }
							  add_government_reform = tribal_conscription
						        set_country_flag = change_conscription_law
						}
				}
				#Default
				if = {
				        limit = { 
					        NOT = { 
					               has_country_flag = change_conscription_law
					        } 
					    }
						add_government_reform = feudal_conscription
						set_country_flag = change_conscription_law
				}
				
				#Remove Flag
				clr_country_flag = change_conscription_law
				if = {
				      limit = { is_emperor = yes }
					  add_manpower = 10
				}
				
				#Tax Policy
				if = {
				       limit = { 
					            OR = {
								     tag = MNG 
						             tag = PLC
                                     AND = {
									        tag = POL
											is_year = 1445
									 }	
                                     tag = PAP									 
						 	    }
						}
					   add_government_reform = tax_policy_1
				}
				else_if = {
				       limit = { 
					            OR = {
								   tag = FRA 
						           tag = MAM
                                   tag = HAB
                                   tag = CAS
                                   tag = SPA								   
								}
						}
					   add_government_reform = tax_policy_2
				}
			
				
				else_if = {
				       limit = { 
                              OR = {
							         tag = QNG
							         tag = SWE
									 tag = MOS
									 tag = RUS
									 culture_group = japanese_g
							  }
					   }
					   add_government_reform = tax_policy_4
				}
				else = { #Default
				       add_government_reform = tax_policy_3
				}
				add_government_reform = economic_policy_3
				add_government_reform = cur_government_capacity
				#Cultural Policy
				if = {
				       limit = {
					         OR = {
							       tag = TUR
								   tag = PLC
								   tag = QNG
								   tag = MUG
								   tag = GBR
								   tag = LIT
								   tag = MAM
							 }
					   }
					  add_government_reform = cu_cultural_policy_4
				}
				else_if = {
				        limit = {
						     OR = {
							       tag = RUS
								   tag = JAP
								   tag = MOS
								   tag = SPA
								   tag = PRU
								   tag = SPA
							 }
						}
						add_government_reform = cu_cultural_policy_2
				}
				else = {
				        add_government_reform = cu_cultural_policy_3
				}
				
				#Religious Policy
				if = { #Piety
				      limit = {
					          OR = {
							         tag = CAS
									 tag = SPA
									 tag = ARA
									 tag = PAP
									 tag = MOS
									 tag = RUS
							  }
					  }
					    add_government_reform = cu_religious_policy_4
					  
				}
				else_if = {
				      limit = {
					          OR = {
							         tag = TUR
									 tag = MUG									
									 tag = QNG
									 AND = { #Ã©dit de Nantes
									       tag = FRA
										   is_year = 1598
										   NOT = { is_year = 1685 }
									 }
									 tag = PLC
									 tag = LIT
									 tag = POL
									 tag = NED
							  }
					  }
					  add_government_reform = cu_religious_policy_2
				}
				else = { #Default
				     add_government_reform = cu_religious_policy_3
				}
				
				#Education Policy
				if = {
				      limit = { 
					         OR = {
        							 tag = PRU 
									 tag = GBR
							 }
							 adm_tech = 19
					  }
					  add_government_reform = education_policy_public
			        every_owned_province = {
				     set_province_flag = education_policy_public_flag
					 clr_province_flag = education_policy_church_flag
					 clr_province_flag = education_policy_burghers_flag
					 remove_province_modifier = cu_church_school
					 remove_province_modifier = cu_church_school_2
				     remove_province_modifier = cu_burghers_school
					 remove_province_modifier = cu_burghers_university
				     if = { 
							limit = { has_building = public_school }
							add_province_modifier = {
							       name = cu_public_school
								   duration = -1
							}
					 }
					 if = { 
							limit = { has_building = university }
							add_province_modifier = {
							       name = cu_public_university
								   duration = -1
							}
					 }
					 
				    }
				}
				else_if = {
				     limit = {  
					         adm_tech = 15
							 capital_scope = {
							       continent = europe
							 }
					 }
					 add_government_reform = education_policy_burghers
			        every_owned_province = {
				     set_province_flag = education_policy_burghers_flag
				     if = { 
							limit = { has_building = public_school }
							add_province_modifier = {
							       name = cu_burghers_school
								   duration = -1
							}
					 }
					 if = { 
							limit = { has_building = university }
							add_province_modifier = {
							       name = cu_burghers_university
								   duration = -1
							}
					 }
					 
				    }
			    }
				else_if = {
				    limit = {  
					       OR = {
						         religion_group = christian
								 religion_group = muslim
								 religion_group = eastern
						   }
					}
					add_government_reform = education_policy_church
			        every_owned_province = {
				     set_province_flag = education_policy_church_flag
				     if = { 
							limit = { has_building = temple }
							add_province_modifier = {
							       name = cu_church_school
								   duration = -1
							}
					 }
					 else_if = { 
							limit = { has_building = cathedral }
							add_province_modifier = {
							       name = cu_church_school_2
								   duration = -1
							}
					 }
					 
				    }
				}
				else = {
				      add_government_reform = education_policy_nobles
					   every_owned_province = {
				           set_province_flag = education_policy_church_flag
					 
				    }
				}

				#GC
				if = {
					limit = {
						tag = MNG
					}
					add_government_reform = shrink_government_capacity
				}
				
				
		
				clr_country_flag = chose_religious_policy_timer 
				clr_country_flag = chose_cultural_policy_timer 
				clr_country_flag = chose_tax_policy_timer
				clr_country_flag = chose_economic_policy_timer
				clr_country_flag = chose_trade_policy_timer
				clr_country_flag = chose_gc_policy_timer
				
				
				#Government Reform
				if = {
					limit = {
						OR = {
							religion_group = muslim
							religion_group = jewish_group
							religion_group = dharmic 
							government = theocracy
						}
					}
					add_government_reform = divine_law
					set_country_flag = gov_start
				}
				else_if = {
				    limit = {
					      OR = {
					         religion_group = christian
						     religion_group = eastern
						  }
						  NOT = { government = tribal }
						  NOT = { is_primitive = yes }
					}
					add_government_reform = sovereign_code
					set_country_flag = gov_start
				}
				else = {
					add_government_reform = oral_tradition
				}
				if = {
					limit = {
						OR = {
							has_reform = celestial_empire
							has_reform = celestial_empire_2
							has_reform = celestial_empire_3
							has_reform = zhuhou
							has_reform = chinese_revolter
							has_reform = mamluk_government
							tag = DAI 
							tag = KOR							
							government = republic
							government = tribal
						}
					}
					add_government_reform = noble_council
				}
				else_if = {
					limit = {
							OR = {
								tag = ENG
								tag = GBR
								has_reform = english_monarchy
							}
					}
					add_government_reform = eng_grand_charter
					add_government_reform = noble_council
				}
				else_if = {
					limit = {
							tag = FRA
							NOT = { is_year = 1516 }
					}
					add_government_reform = fra_pragmatic_sanction
					add_government_reform = court_despotism					
				}
				else_if = {
					limit = {
						OR = {
							government = theocracy
							has_reform = feudal_theocracy		
						}
					}
					add_government_reform = clergy_reform
				}
				else_if = {
					limit = {
						government = monarchy
						capital_scope = {
							continent = europe
						}
						religion_group = christian
						OR = {
								tag = POL
								tag = PLC
								tag = CAS
								AND = {
									tag = SPA
									NOT = { is_year = 1702 }
								}
								AND = {
									tag = ENG
									NOT = { is_year = 1649 }
								}
								NOT = { is_year = 1550 }
						}
					}
					add_government_reform = noble_council
				}
				else_if = {
						limit = {
							OR = {
								has_reform = autocracy_reform
								has_reform = plutocratic_reform
								has_reform = ottoman_government
								has_reform = grand_duchy_reform
								has_reform = principality
								has_reform = tsardom
								has_reform = prussian_monarchy
								has_reform = mandala_reform
								has_reform = shogunate
								has_reform = daimyo
								has_reform = indep_daimyo								
								has_reform = cu_feudalism_reform
								has_reform = indian_sultanate_reform
								has_reform = nayankara_reform
								has_reform = misl_confederacy_reform
								has_reform = rajput_kingdom
								has_reform = iqta
							}
						}
					add_government_reform = court_despotism
				}
				else = { add_government_reform = court_despotism }
				
				if = {
					limit = {
						OR = {
							has_reform = celestial_empire
							has_reform = celestial_empire_2
							has_reform = celestial_empire_3
							has_reform = zhuhou
							has_reform = chinese_revolter
							tag = KOR
							tag = DAI
							religion = confucianism
						}
					}
					add_government_reform = bureaucratic
					set_country_flag = keju_system
				}
				else_if = {
					limit = {
						OR = {
							government = tribal
							has_reform = misl_confederacy_reform
						}
					}
					add_government_reform = self_governance
				}
				else_if = {
					limit = {
						OR = {
							has_reform = iqta
							has_reform = colonial_government
							has_reform = indian_sultanate_reform
							has_reform = mandala_reform
							has_reform = ottoman_government
							government = republic
						}
					}
					add_government_reform = mandate_system
				}
				else = {
					add_government_reform = cu_feudalism_reform
				}
				if = {
					limit = {						
						OR = {
							has_reform = venice_merchants_reform
							has_reform = veche_republic								
						}						
					}
					add_government_reform = merchants_reform
				}
				if = {
					limit = {
						OR = {
							AND = {
								tag = ENG
								NOT = { is_year = 1649 }
							}
							government = republic
							tag = PLC
							has_reform = noble_council
						}
					}
					add_government_reform = noble_election
				}
				else_if = {
					limit = {
						OR = {
							AND = {
								tag = ENG
								is_year = 1689
							}
							AND = {
								tag = FRA
								is_year = 1789
							}
							tag = USA
							
						}
					}
					add_government_reform = burghers_election
				}
				else = {
					add_government_reform = no_election
				}
				if = {
					limit = {
						tag = PLC
					}
					add_government_reform = elective_monarchy
				}				
				if = {
					limit = {
						NOT = {
							OR = {
								has_reform = shogunate
								has_reform = daimyo
								has_reform = indep_daimyo
								has_reform = mamluk_government
								has_reform = celestial_empire
								has_reform = celestial_empire_2
								has_reform = celestial_empire_3
								has_reform = zhuhou
								has_reform = chinese_revolter
								has_reform = ottoman_government
								has_reform = free_city
								has_reform = trading_city
								has_reform = colonial_government
								has_reform = dutch_republic
								has_reform = merchants_reform
								has_reform = steppe_empire
								has_reform = steppe_horde
								has_reform = elective_monarchy
								has_reform = siberian_tribe
								has_reform = revolutionary_empire_reform
								has_reform = revolutionary_republic_reform
								has_reform = papacy_reform
								has_reform = leading_clergy_reform
								has_reform = monastic_order_reform
								has_reform = eng_grand_charter
								has_reform = fra_pragmatic_sanction		   
							}
						}
					}
					add_government_reform = ord_reform
				}
				remove_country_modifier = tur_janissaries_timer
				
				#Technology Cost
				
				#Cultural Heritage
				if = {
				       limit = {
					          OR = {
							        tag = MNG
									tag = QNG
							  }
					   }
					   change_variable = { which = art_legacy value = 200 }
				}
				else_if = {
				       limit = {
					          culture_group = latin
					   }
					   if = {
					          limit = { total_development = 100 }
							  change_variable = { which = art_legacy value = 40 }
					   }
					   else = {
					          change_variable = { which = art_legacy value = 20 }
					   }
					   
					   
				}
				else_if = {
				       limit = {
					          tag = FRA
					   }
					   change_variable = { which = art_legacy value = 40 }
				}
				else_if = {
				       limit = {
					         tag = ENG
					   }
					   change_variable = { which = art_legacy value = 20 }
				}
				else_if = {
				       limit = {
					          culture_group = germanic
					   }
					   if = {
					          limit = { total_development = 100 }
							  change_variable = { which = art_legacy value = 30 }
					   }
					   else = {
					          change_variable = { which = art_legacy value = 10 }
					   }
				}
				else_if = {
				      limit = {
					          OR = {
					              tag = POL
							      tag = LIT 
					          }
					   }
					  change_variable = { which = art_legacy value = 10 }
				}
				else_if = {
				       limit = {
					           tag = MAM
					   }
					   change_variable = { which = art_legacy value = 40 }
				}
				else_if = {
				       limit = {
					           tag = TIM
					   }
					   change_variable = { which = art_legacy value = 30 }
				}
				else_if = {
				       limit = {
					          OR = {
							         culture_group = hindusthani
									 culture_group = western_aryan
							  }
							  total_development = 100
					   }
					   change_variable = { which = art_legacy value = 20 }
				}
				else_if = {
				      limit = {
					          OR = {
							        culture_group = korean_g
									culture_group = japanese_g
							  }
					  }
					  change_variable = { which = art_legacy value = 20 }
				}
				else_if = {
				      limit = {
					         OR = {
							       tag = AYU
								   tag = DAI
							 }
					  }
					  change_variable = { which = art_legacy value = 20 }
				}
				else_if = {
				      limit = {
					          owns = 151
					  }
					  change_variable = { which = art_legacy value = 60 }
				}
                #Technology Focus
                if = {
				      limit = {
					       OR = {
						         tag = TUR
								 tag = MOS
								 tag = RUS
								 tag = HUN
								 tag = BRA
								 tag = MJZ
								 tag = MHX
								 tag = SCO
								 tag = SWI
								 tag = SWE
						   }
					  }
					  add_country_modifier = {
					        name = cu_mil_tech_focus
							duration = -1
					  }
				}
                else_if = {
				      limit = {
					       OR = {
						          tag = VEN
								  tag = ENG
								  tag = GBR
								  tag = POR
								  tag = SPA
								  tag = HOL
								  tag = NED
						   }
					  }
					  add_country_modifier = {
					        name = cu_dip_tech_focus
							duration = -1
					  }
				}
                else_if = {
				      limit = {
					       OR = {
						          capital_scope = { region = italy_region }
								  tag = POL
								  tag = PLC
								  tag = MNG
								  tag = QNG
						   }
					  }
					  add_country_modifier = {
					        name = cu_adm_tech_focus
							duration = -1
					  }
				}		
				cu_calc_country_dist = yes
				cu_calc_total_stability_growth = yes
	            cu_calc_country_absolute_dist = yes			
				#Set initial absolutism
				if = {
					limit = {
						OR = {
							tag = MNG
							tag = QNG
						}
					}
					add_absolutism = 40
				}
				else_if = {
					limit = {
						OR = {
							AND = {
								technology_group = western
								is_year = 1700
							}
							AND = {
								tag = FRA
								is_year = 1600
							}
							AND = {
								tag = RUS
								is_year = 1672
								NOT = { is_year = 1725 }
							}
							AND = {
								tag = SWE
								is_year = 1618
								NOT = { is_year = 1721 }
							}
						}
					}
					add_absolutism = 40
				}
				else_if = {
					limit = {
						tag = BYZ
					}
					add_absolutism = 30
				}
				else_if = {
					limit = {
						has_reform = zhuhou
					}
					add_absolutism = 30
				}
				else_if = {
					limit = {
						OR = {
							AND = {
								tag = TUR
								OR = {
									AND = {
										is_year = 1683
										NOT = { is_year = 1703 }
									}
									is_year = 1789
								}
							}
							AND = {
								tag = RUS
								is_year = 1584
								NOT = { is_year = 1613 }
							}
							AND = {
								tag = PLC
								is_year = 1650
							}
						}
					}
					add_absolutism = 10
				}
				else = {
					add_absolutism = 20
				}
				if = {
					limit = {
						AND = {
							tag = MNG
							is_year = 1645
						}
					}
					add_absolutism = -20
				}
				clr_country_flag = cu_stability_fixed
		}
		
		cu_country_census = yes	
		cu_calc_total_art_solts = yes
		cu_initialize_trade_zone = yes
		#cu_calc_trade_value = yes
		set_global_flag = cu_five_years_pulse
	    every_country = {
		       limit = { ai = no }
			   country_event = { id = cuglobal.93 } #Initialize Ruler Data
			   if = {
			        limit = { has_regency = no }
					cu_register_ruler = yes
					country_event = { id = state.1031 }
			   }
		}
	}
	
	### TRADE GOODS SETUP ###
	# Rural #
	every_province = { limit = { NOT = { cu_has_specific_goods = yes } is_city = yes } cu_setup_trade_goods_rural = yes }
	# Overwrites #
	every_province = { limit = { is_city = yes } cu_setup_trade_goods_overwrites = yes }
	# Urban #
	every_province = { limit = { is_city = yes } cu_setup_trade_goods_urban = yes }
	
	set_global_flag = cu_start
}

# country
on_religion_change = {
	if = {
		limit = { NOT = { religion_group = muslim } }
		remove_country_modifier = tur_arabian_path
	}
	if = {
		limit = {
			NOT = { religion = confucianism }
		}
		remove_country_modifier = neo_confucianism
	}
	if = {
		limit = {
			religion_group = christian
		}
		remove_country_modifier = the_anti_christian_edict
	}
	if = {
		limit = {
			NOT = { religion = orthodox }
		}
		every_known_country = {
			limit = {
				reverse_has_opinion_modifier = {
					who = ROOT
					modifier = closed_down_the_patriarchate
				}
			}
			reverse_remove_opinion = {
				who = ROOT
				modifier = closed_down_the_patriarchate
			}
		}
	}
	if = {
		limit = {
			religion = catholic
			has_ruler_flag = personal_catholic_sympathies
		}
		country_event = { id = protestantism_events.19 }
	}
	if = {
		limit = {
			NOT = { religion = catholic }
			has_ruler_modifier = catholic_zealot
		}
		remove_country_modifier = catholic_zealot
	}
	if = {
		limit = {
			NOT = { religion = catholic }
			has_country_modifier = spanish_bible_translation
		}
		remove_country_modifier = spanish_bible_translation
	}
	if = {
		limit = {
			NOT = { religion = catholic }
			has_country_modifier = supressing_spanish_protestantism
		}
		remove_country_modifier = supressing_spanish_protestantism
	}
	if = {
		limit = {
			NOT = { religion = catholic }
			has_country_modifier = counter_reformation
		}
		remove_country_modifier = counter_reformation
	}
	if = {
		limit = {
			religion = protestant
		}
		set_country_flag = converted_to_protestantism
	}
	if = {
	    limit = {
		    religion = anglican
		}
		every_owned_province = {
		       limit = {
			          is_core = PREV
					  OR = {
					        religion = protestant
							religion = reformed
					  }
			   }
			   if = {
			          limit = { religion = protestant }
					  change_religion = anglican
			   }
			   else = {
			          remove_province_modifier = religious_zeal_at_conv
			   }
			   
		}
	}
	every_owned_province = {
	    cu_calc_base_cultural_acceptance = yes
	}
}

# country.
on_secondary_religion_change = {
	# Done from code: add_prestige = -50 (Define: CHANGE_SECONDARY_PRESTIGE_HIT)
	every_owned_province = {
		limit = { has_province_modifier = tengri_monastic_order }
		remove_province_modifier = tengri_monastic_order
	}
	every_owned_province = {
		limit = { has_province_modifier = tengri_shiite_settled_in_capital }
		remove_province_modifier = tengri_shiite_settled_in_capital
	}
	every_owned_province = {
		limit = { has_province_modifier = tengri_insincere_leadership }
		remove_province_modifier = tengri_insincere_leadership
	}
	every_owned_province = {
		limit = { has_province_modifier = tengri_religious_influx }
		remove_province_modifier = tengri_religious_influx
	}
	every_owned_province = {
		limit = { has_province_modifier = tengri_ruler_questioned }
		remove_province_modifier = tengri_ruler_questioned
	}
	every_owned_province = {
		limit = { has_province_modifier = tengri_strengthened_local_clans }
		remove_province_modifier = tengri_strengthened_local_clans
	}
	every_owned_province = {
		limit = { has_province_modifier = tengri_growing_cities }
		remove_province_modifier = tengri_growing_cities
	}
	every_owned_province = {
		limit = { has_province_modifier = tengri_christian_mission }
		remove_province_modifier = tengri_christian_mission
	}
	every_owned_province = {
		limit = { has_province_modifier = tengri_unchristian_values }
		remove_province_modifier = tengri_unchristian_values
	}
	every_owned_province = {
		limit = { has_province_modifier = tengri_monastic_order }
		remove_province_modifier = tengri_monastic_order
	}
	every_owned_province = {
		limit = { has_province_modifier = hindufication }
		remove_province_modifier = hindufication
	}
	every_owned_province = {
		limit = { has_province_modifier = tengri_influx_of_monks }
		remove_province_modifier = tengri_influx_of_monks
	}
	every_owned_province = {
		limit = { has_province_modifier = tengri_abandoning_the_old_ways }
		remove_province_modifier = tengri_abandoning_the_old_ways
	}
	every_owned_province = {
	    cu_calc_base_cultural_acceptance = yes
	}
	remove_country_modifier = tengri_devout_muslim
	remove_country_modifier = tengri_confucian_elites_alienated
	remove_country_modifier = tengri_confucian_titles
	remove_country_modifier = tengri_traditionalists_strengthened
	remove_country_modifier = tengri_confucian_nobles
	remove_country_modifier = tengri_pali_legal_traditions
	remove_country_modifier = tengri_religious_pilgrimages
	remove_country_modifier = tengri_monks_in_capital
	remove_country_modifier = tengri_influx_of_monks
	remove_country_modifier = tengri_shiite_immigration
	remove_country_modifier = support_of_the_khojas
	remove_country_modifier = black_shamanism_modifier
	remove_country_modifier = tengri_animist_pantheon
	remove_country_modifier = zoroastrian_traders
	remove_country_modifier = spread_of_tengri_tea_ceremony
	remove_country_modifier = tengri_tea_ceremony
	remove_country_modifier = tengri_japanese_swordsmithing
	remove_country_modifier = tengri_bow_and_arrow_defended
	remove_country_modifier = tengri_support_of_shamans
	remove_country_modifier = tengri_hindu_conflict
	remove_country_modifier = tengri_hindu_syncretism
	remove_country_modifier = tengri_devout_christian_ruler
	remove_country_modifier = tengri_personal_confessor
	remove_country_modifier = tengri_confucian_administrators
	remove_country_modifier = tengri_traditional_elites_alienated
	remove_country_modifier = tengri_jihad
	remove_country_modifier = tengri_stood_up_for_yassa
	remove_country_modifier = tengri_sufi_teacher
	remove_country_modifier = tengri_qadi
	remove_country_modifier = tengri_religious_influx
	remove_country_modifier = tengri_ibadi_scholars
	remove_country_modifier = tengri_clergy_conflicts
	remove_country_modifier = tengri_shamans_spurned
	clr_country_flag = khojas_established
	clr_country_flag = tengri_christian_devout_court
	clr_ruler_flag = tengri_muslim_ruler_questioned
	if = {
		limit = {
			check_variable = { which = khojas_retained value = 1 }
		}
		set_variable = {
			which = khojas_retained value = 0
		}
	}
}

# country. Spawned when Enforcing Rebel Demands through a Support Rebels-war.
on_enforce_rebel_demands = {
	# ROOT = The winning country
	# FROM = The loosing country
	set_country_flag = helped_rebels_win_war
	every_owned_province = {
	       set_variable = { which = cu_var1 value = -5 }
		   cu_add_cultural_acceptance = yes
	}
}

# country
on_colonial_liberation = {
	country_event = { id = colonial_nation.90 days = 1 }
}

# country
on_colonial_reintegration = {
	events = {
		colonial_nation.91
	}
}

# country
on_peace_actor = {
	events = {
		usa_dlc.36				# Evacuation Day
		native_americans.7		# Appoint Peace Chief
	}
}

# country
on_peace_recipient = {
	events = {
		native_americans.7		# Appoint Peace Chief
	}
}

# country
# root = winning country, from = loser country
on_war_won = {
	FROM = { 
	       country_event = { id = flavor_cri.6 } set_country_flag = at_war_bef
	}
	ROOT = { 
	       country_event = { id = tributary_events.32 } set_country_flag = at_war_bef 
	       change_variable = { which = cu_ruler_warw value = 1 }	   
	}
	if = {
		limit = {
			OR = { #Prevent multiple calculations due to seperate peace.
				  FROM = { is_at_war = no }
				  FROM = {
					   NOT = { has_country_flag = recent_war_lost }  
				  }
				  FROM = {
					   had_country_flag = {
								flag = recent_war_lost
								days = 1825
					   }  
				  }
			}
		}
		FROM = {
		    change_variable = { which = cu_ruler_warl value = 1 }
			clr_country_flag = recent_war_lost
			set_country_flag = recent_war_lost
			set_variable = { which = cu_ra_wl value = 0 }
			set_variable = { which = cu_revan value = 0 }
			export_to_variable = {
				which = cu_ra_wl
				value = total_development
			}
			export_to_variable = {
				which = cu_ra_ww
				value = total_development
				who = ROOT
			}
			export_to_variable = {
				which = cu_revan
				value = trigger_value:revanchism
			}
			
			multiply_variable = { which = cu_revan value = 0.5 }
			set_variable = { which = cu_revan_l which = cu_revan }
			while = {
				limit = { check_variable = { which = cu_revan_l value = 2 } }
				change_variable = { which = cu_revan_l value = -2 }
				add_absolutism = -1
			}
			set_variable = { which = cu_revan_l value = 0 }
			set_variable = { which = cu_ceremony_count value = 0 }
			if = {
			      limit = {
				       NOT = { check_variable = { which = cu_ra_ws value = 0 } }
				  }
				  set_variable = { which = cu_ra_ws value = 0 }
			}
			multiply_variable = { which = cu_ra_ws value = 0.66 }
			cu_check_ruler_ra_mil = yes
			set_variable = { which = cu_revan value = 0 } 
		}
	
	}
 
	if = {
		limit = {
			OR = { #Prevent multiple calculations due to seperate peace.
				  is_at_war = no
				  ROOT = {
					   NOT = { has_country_flag = recent_war_won }  
				  }
				  ROOT = {
					   had_country_flag = {
								flag = recent_war_won
								days = 1825
					   }  
				  }
			}
		}
	
		ROOT = { #Ruler Achievement Calculation
				change_variable = { which = cu_ruler_warw value = 1 }
				clr_country_flag = recent_war_won
				set_country_flag = recent_war_won
				set_variable = { which = cu_ra_ww value = 0 }
				export_to_variable = {
					which = cu_ra_wl
					value = total_development
					who = FROM
				}
				export_to_variable = {
				   which = cu_ra_ww
				   value = total_development
				}
				if = {
					  limit = {
						   NOT = { check_variable = { which = cu_ra_ww value = 1 } }
					  }
					  set_variable = { which = cu_ra_ww value = 1 }
				}
				
				divide_variable = {
					   which = cu_ra_wl
					   which = cu_ra_ww 
				}
				if = {
					  limit = {
						   check_variable = { which = cu_ra_wl value = 2 }
					  }
					  set_variable = { which = cu_ra_wl value = 2 }
				}
				if = {
					  limit = {
						   NOT = { check_variable = { which = cu_ra_w value = 0 } }
					  }
					  set_variable = { which = cu_ra_w value = 0 }
				}
				change_variable = { which = cu_ra_w which = cu_ra_wl }
				
				if = {
					  limit = {
						   NOT = { check_variable = { which = cu_ra_ws value = 0 } }
					  }
					  set_variable = { which = cu_ra_ws value = 0 }
				}
				change_variable = { which = cu_ra_ws which = cu_ra_wl }
				
				change_variable = { which = cu_ceremony_count value = 1 }
				export_to_variable = {
					which = cu_revan
					value = trigger_value:revanchism
					who = FROM
				}
				
				multiply_variable = { which = cu_revan value = 0.5 }
				multiply_variable = { which = cu_revan which = cu_ra_wl }
				set_variable = { which = cu_var1 which = cu_revan }
				cu_change_stability_point_hidden = yes
				while = {
					limit = { check_variable = { which = cu_revan value = 2 } }
					change_variable = { which = cu_revan value = -2 }
					add_absolutism = 1
				}
				set_variable = { which = cu_revan value = 0 }
				
				cu_check_ruler_ra_mil = yes
		}

    }
	
	
}

# country
# root = loser country, from = winner country
on_war_lost = {
	ROOT = { country_event = { id = flavor_cri.6 } }
	ROOT = { country_event = { id = tributary_events.32 } }
	ROOT = { country_event = { id = urban.1200 days = 60 } }
}

# country
# root = winning country, from = loser country
on_battle_won_country = {
}

# country
# root = loser country, from = winner country
on_battle_lost_country = {
	battle_cult_spreading_effect = yes #Scripted effect for fetishist cult mechanics.
	random_events = {
		90 = 0
		10 = friendship_events.1 #Historical Friendship Broken
	}
}

# province
# root = location, from = loser country
on_battle_won_province = {
	random_events = {
		1000 = 0
		100 = war_of_the_roses.6	# WotR - Rebel Leaders Captured
	}
}

#Unit Scope OnAction for Battle Won
on_battle_won_unit = {
	if = {
		limit = {
			unit_owner = { ai = no } #Scopes to Unit Owner from Unit Scope
			general_with_steam_name = yes #Unit Scope Trigger
		}
		unit_owner = { set_country_flag = general_with_steam_name_won_battle }
	}
}

# #Unit Scope OnAction for Battle Lost
on_battle_lost_unit = {
	
}

# province
# root = location, from = country doing it
on_added_to_trade_company ={

}

# province
# root = location, from = country doing it
on_removed_from_company ={

}

# province
# root = location, from = country doing it
on_company_formed ={

}

# province
# root = location, from = country doing it
on_company_disolved ={

}

# province
# root = location, from = winner country
on_battle_lost_province = {
	random_events = {
		1000 = 0
		100 = tyw_events.22	# Capital Battle in Religious War
	}
}

# country
# root = winning country, from = location
on_siege_won_country = {
	events = {
		tyw_events.14 # Fall of Prague in Religious War
	}	
}

# country
# root = losing country, from = location
on_siege_lost_country = {
   if = { #Stability Penalty from losing province
    limit = { 
	        FROM = { 
			        owned_by = ROOT
			        OR = {
					      NOT = { has_province_flag = recently_occupied }
						  had_province_flag = {
						        flag = recently_occupied
								days = 1825
						  }
					}
			}         		
	}
	FROM = {
		clr_province_flag = recently_occupied
		set_province_flag = recently_occupied
	}
    set_variable = { which = cu_var1 value = 0 }
    export_to_variable = {
	    which = cu_var1     
		value = development
		who = FROM
	}
	if = {
	     limit = { FROM = { is_capital = yes } }
		 multiply_variable = { which = cu_var1 value = 1.5 }
	}
	else_if = {
	     limit = { FROM = { has_owner_culture = yes } }
		 multiply_variable = { which = cu_var1 value = 1.1 }
	}
	else_if = {
	     limit = { culture_group = FROM }
		 multiply_variable = { which = cu_var1 value = 0.9 }
	}
	else_if = {
	     limit = { FROM = { has_owner_accepted_culture = no } }
	     multiply_variable = { which = cu_var1 value = 0.3 }
	}
	if = {
	    limit = {
		    FROM = { is_capital = no }
		}
		export_to_variable = {
			which = cu_var2    
			value = total_development
		}
		divide_variable = { which = cu_var1 which = cu_var2 }
		multiply_variable = { which = cu_var1 value = 100 }
	}
	cu_change_stability_point_hidden = yes
   }
}

# province
# root = location, from = losing country
on_siege_won_province = {
    province_event = { id = empireim.5 } #Remove heretic buildings
	if = {
	       limit = {
		       NOT = { controlled_by = REB }
			   NOT = { owned_by = controller }
		   }
		   add_province_modifier = {
		        name = cu_recent_conquest
				duration = 1825
		   }
	}
	if = {
		limit = {
			controller = { tag = REB } #Rebel
			owner = { has_country_flag = a_total_war_against_estates }
			is_capital = yes
		}
		owner = { 
			set_country_flag = government_lost_war 
			country_event = { id = parlaments.998 }
		}
	}
	if = { 
		limit = { 				
		        OR = {
					controller = { war_with = FROM }
					controller = { tag = REB } #Rebel
				}
		        #has_global_flag = test_version
				OR = {
					has_building = fort_15th
					has_building = fort_16th
					has_building = fort_17th
					has_building = fort_18th
					development = 30
					is_capital = yes
					AND = {
						controller = { has_reform = steppe_horde }
						development = 4
						OR = {
							ai = no
							AND = {
								ai = yes
								development = 8
							}
						}
					}
				}
		        OR = {
					development = 20
					AND = {
						development = 15
						OR = {
						   province_id = 183
						   province_id = 236
						}									   
					}
					controller = { has_reform = steppe_horde }
				}
				OR = {
					NOT = { has_province_flag = recent_dev_reduction }
					had_province_flag = {
					   flag = recent_dev_reduction 
					   days = 3650
					}
				}
				NOT = { has_province_modifier = recently_razed }
				NOT = { has_province_modifier = recently_looted }
		}
		province_event = { id = empireim.4 }
	}
	if = {
	        limit = {
			        NOT = { controller = { tag = REB } }
					OR = {
					       NOT = { has_province_flag = recent_art_raid }
						   had_province_flag = {
						            flag = recent_art_raid
									days = 365
						   }
					}
			}
			cu_do_art_piece_raiding = yes
	}
	
}

# province
# root = location, from = winning country
on_siege_lost_province =  {
	events = {
		war_of_the_roses.10		# Lancaster Stronghold
		war_of_the_roses.11		# York Stronghold
		french_wars_of_religion.7 #Ravening Religious Fanatics
		french_wars_of_religion.9 #french_wars_of_religion.9
		synthetic_dawn.4
	}
	if = {
	       limit = { NOT = { controlled_by = owner } }
		   #Lose 5% Cultural Acceptance
	       set_variable = { which = cu_var1 value = -5 }
	       cu_add_cultural_acceptance = yes
	}
	
	if = {
		limit = {
			OR = {
					culture_group = east_asian
					is_claim = FROM
			}
			NOT = {
				culture = manchu
				controlled_by = REB
				owned_by = FROM
			}
			FROM = {  
				NOT = { has_country_modifier = the_mandate_of_heaven_lost } 
				OR = {
					has_reform =  zhuhou
					has_reform =  celestial_empire
					has_reform =  celestial_empire_2
					has_reform =  celestial_empire_3
					has_country_flag = no_more_celestial
				}
			}
			owner = { 
				NOT = { 
					OR = {
						has_country_modifier = the_mandate_of_heaven 
						meritocracy = 70
					}
				} 
			}
		}
		owner = {
			if = {
				limit = {
					is_emperor_of_china = yes
				}
				add_meritocracy = -1
			}
		}
		province_event = { id = mandate.002 }
		FROM = { 
			country_event = { id = mandate.101 } 
			if = {
				limit = {
					is_emperor_of_china = yes
				}  
				add_meritocracy = 1
				add_absolutism = 1
			}
		}
		remove_core = owner
		add_core = FROM
		cede_province = FROM
	}
	
}

# province
# root = location, from = country that abandons colony
# Fired right before the colony is abandoned.
on_abandon_colony = {
}

# OBS: Consider that the following on_actions can be called for Personal Union juniors as well.
# country 
on_new_monarch = {
    crimean_succession_effect = yes #Scripted effect
	slesvig_question_effect = yes #Scripted effect
	
	
	
	set_variable = { which = cu_ra_w value = 0 }
	set_variable = { which = cu_ra_wh value = 0 } #Tribe Heritage Percent
	export_to_variable = {
	      which = cu_ra_wh
		  value = MIL
	}
	divide_variable = { which = cu_ra_wh value = 20 }
	change_variable = { which = cu_ra_wh value = 0.1 }
	if = {
	      limit = { full_idea_group = tradition_ideas }
		  change_variable = { which = cu_ra_wh value = 0.1 }
	}
	multiply_variable = { which = cu_ra_ws which = cu_ra_wh }
	
	set_variable = { which = cu_ra_a value = 0 }
	set_variable = { which = ruler_gc value = 0 }

        if = {
		limit = {
			NOT = { has_global_flag = death_of_haji_giray } #Also set in history.
			tag = CRI
			exists = TUR
			is_subject = no
			TUR = {
				num_of_cities = ROOT
				is_subject = no
				num_of_ports = 1
			}
		}
		country_event = { id = flavor_cri.1 } #Death of Haji Giray
	}
	if = {
		limit = {
			NOT = { has_global_flag = death_of_haji_giray } #Also set in history.
			tag = CRI
			OR = {
				NOT = { exists = TUR }
				is_subject = yes
				TUR = { NOT = { num_of_cities = ROOT } }
				TUR = { is_subject = yes }
				TUR = { NOT = { num_of_ports = 1 } }
			}
		}
		set_global_flag = death_of_haji_giray
	}
	if = {
		limit = {
			NOT = { has_global_flag = death_of_adolf_of_slesvig } #
			tag = SHL
			is_subject_of = DAN
			ai = yes
		}
		DAN = { country_event = { id = flavor_dan.4 } } # Death of Adolf VIII
		set_global_flag = death_of_adolf_of_slesvig
	}
	if = {
		limit = {
			has_consort_regency = no
			any_owned_province = {
				has_province_modifier = domain_of_spouses_family
			}
		}
		random_owned_province = {
			limit = { has_province_modifier = domain_of_spouses_family }
			remove_province_modifier = domain_of_spouses_family
		}
	}
	if = {
		limit = {
			NOT = { has_dlc = "Mandate of Heaven" }
			has_country_modifier = the_mandate_of_heaven
			NOT = { legitimacy = 80 }
		}
		country_event = { id = china_events.32 }	# History of last ruler 
	}
	ambrosian_republic_effect = yes
	succession_culture_religion_effect = yes
	sheik_ul_islam_effect = yes
	cu_register_ruler = yes
	if = {
	      limit = {
		        ai = no
				has_regency = no
		  }
		  if = {
		       limit = {
			       NOT = { absolutism = 100 }
			   }
				country_event = { id = state.103 }
		  }
	}
	events = {
		tribal_succession.1		# Harsh anti-tribals.
		9492 					# Remove some event modifiers
		flavor_boh.8			# Winter King in Prague
		flavor_kol.1			# Bavarian Archbishop
		war_of_the_roses.101	# WotR - House of Lancaster wins
		war_of_the_roses.102	# WotR - House of York wins
		war_of_the_roses.106	# WotR - Another dynasty has seized the throne
		flavor_tur.102			# Janissary Reward
		flavor_ori.7			# Hamvira Victorious
		flavor_kbo.1			# The two branches of the Sayfawa dynasty
		flavor_kbo.8			# Sayfawa pretenders
		flavor_zan.5			# Coup of Coup of Suleiman and Muhammad al-Mazlum.
		purple_phoenix.1		# BYZ pretenders
		flavor_pol.3480			# The Pacta Conventa
		protestantism_events.15	# Catholic Leaning Monarch
		tengri_events.17		# Keep the Khojas in Power?
		flavor_tus.15			# Savonarola Dies
		flavor_brapru.22		# Succession of Albrecht Achilles
		flavor_brapru.25		# Dispositio Achillea (can also trigger from flavor_brapru.22)
		flavor_nor.27			# Proclamation in Hamar
		china_events.43			# Picking new Capital for China
		celestial_empire_events.3 #Resistance to Sinicization
		flavor_boh.2			#Heretic Kings
		flavor_hun.17			#Maintaining the Black Army
		flavor_tim.1			#Death of Shah Rukh
		muslim_school_events.20 #No Religious School
		flavor_daimyo.4			#Shiba Yoshikado
		                #Power Struggle
	}
	random_events = { 
		1000 = 0
		100 = flavor_kol.1		# Bavarian Archbishop
		100 = flavor_hsa.3		# Hansa: Tagfahrt
		100 = inti_events.1		# Birth of a Panaca
		50 = dynastic_events.4	
		50 = dynastic_events.5	
		25 = harem_events.7		#Failed Policy of Fratricide
	}
	
}				  


on_new_consort = {
	country_event = { id = consort_events.2 }
	if = {
		limit = { has_ruler_flag = had_10_years_anniversary }
		clr_ruler_flag = had_10_years_anniversary
	}
	if = {
		limit = { has_ruler_flag = had_20_years_anniversary }
		clr_ruler_flag = had_20_years_anniversary
	}
	if = {
		limit = { has_ruler_flag = consort_had_affection_of_ruler }
		clr_ruler_flag = consort_had_affection_of_ruler
	}
	events = {
		flavor_daimyo.4			#Shiba Yoshikado
	}
}

# country
on_monarch_death = {

    #Monarchy Review and Stability Impact
	if = {
	     limit = { 
		          OR = {
				        government = monarchy
						government = tribe
				  }
		          has_regency = no		  
		 }
		 set_variable = { which = cu_var1 value = 100 }
		 #Absolutism
		 export_to_variable = {
		     which = cu_var2
			 value = trigger_value:absolutism
		 }
		 change_variable = { which = cu_var2 value = 50 }
		 multiply_variable = { which = cu_var1 which = cu_var2 }
		 divide_variable = { which = cu_var1 value = 150 }
		 #Ruler Skill
		 set_variable = { which = cu_var2 which = cu_ruler_power }
		 change_variable = { which = cu_var2 value = 18 }
		 divide_variable = { which = cu_var2 value = 36 }
		 multiply_variable = { which = cu_var1 which = cu_var2 }
		 #Length of Reign
		 set_variable = { which = cu_var2 which = cu_year }
		 subtract_variable = { which = cu_var2 which = cu_ruler_year }
		 #Development/Population Growth
		 export_to_variable = {
		       which = cu_ruler_dev_change
			   value = total_development
		 }
		 subtract_variable = { which = cu_ruler_dev_change which = cu_ruler_dev }
		 set_variable = { which = cu_ruler_pop_change which = t_pop }
		 subtract_variable = { which = cu_ruler_pop_change which = cu_ruler_pop }
		 
		 if = {
		       limit = { check_variable = { which = cu_var2 value = 50 } }
			   set_variable = { which = cu_var2 value = 50 }
		 }
		 else_if = {
		       limit = { NOT = { check_variable = { which = cu_var2 value = 1 } } } #In case of incorrect year
			   set_variable = { which = cu_var2 value = 1 }
		 }
		 set_variable = { which = cu_reign_length which = cu_var2 }
		 divide_variable = { which = cu_var2 value = 50 }
		 change_variable = { which = cu_var2 value = 0.2 }
		 multiply_variable = { which = cu_var1 which = cu_var2 }
		 if = {
		      limit = { ai = no }
			  set_variable = { which = cu_stp_dis which = cu_var1 }
			  multiply_variable = { which = cu_var1 value = -1 }
			  #country_event = { id = state.102 }
			  if = {
			        limit = { NOT = { has_country_flag = cu_stability_fixed } }
					cu_change_stability_point_hidden = yes
			  }
		 }
		 else = {
		      multiply_variable = { which = cu_var1 value = -1 }
			  if = {
			        limit = { NOT = { has_country_flag = cu_stability_fixed } }
					cu_change_stability_point_hidden = yes
			  }
		 }
	}
	if = {
		limit = {
			tag = ANS
			BRA = {
				has_country_flag = albrecht_achilles_flag
			}
		}
		BRA = {
			clr_country_flag = albrecht_achilles_flag #Just to be sure
			kill_heir = yes #If Albrecht Achilles dies in Ansbach he will also be dead in Brandenburg, will appear as normal death of heir to BRA.
		}
	}
	if = { 
		limit = {
			has_country_flag = regent_ruler
		}	
		clr_country_flag = regent_ruler
	}
	events = {
		flavor_tus.16 #Savanorola Leaves This World
	}
}

# country 
on_regent = {
	if = {
		limit = {
			NOT = { has_global_flag = death_of_haji_giray } #Also set in history.
			tag = CRI
			exists = TUR
			is_subject = no
			TUR = {
				num_of_cities = ROOT
				is_subject = no
				num_of_ports = 1
			}
		}
		country_event = { id = flavor_cri.1 } #Death of Haji Giray
	}
	if = {
		limit = {
			NOT = { has_global_flag = death_of_haji_giray } #Also set in history.
			tag = CRI
			OR = {
				NOT = { exists = TUR }
				is_subject = yes
				TUR = { NOT = { num_of_cities = ROOT } }
				TUR = { is_subject = yes }
				TUR = { NOT = { num_of_ports = 1 } }
			}
		}
		set_global_flag = death_of_haji_giray
	}
	set_country_flag = regent_ruler
	events = {
		tribal_succession.1	# harsh anti-tribals.
		flavor_mlo.1	# The Ambrosian Republic
		flavor_tim.1			#Death of Shah Rukh
		flavor_daimyo.4			#Shiba Yoshikado
	}
}

# country 
on_new_term_election = {
	events = {
		700		# Election event
		elections.720		# Dutch Republic
	}
}

# country 
on_death_election = {
	events = {
		701		# Election event
		elections.721		# Dutch Republic
	}
}

# country
on_death_foreign_slave_ruler = {
	events = {
		mamluk_events.0 # Choose new ruler
	}
}

# country 
on_replace_governor = {
	events = {
		elections.707
	}
}


# country
on_bankruptcy = {
	if = {
		limit = { ai = yes }
		add_years_of_income = 2.4
		add_stability = 1
		add_adm_power = 150
		add_dip_power = 150
		add_mil_power = 150
	}
}

# country (country annexing, root = target)
on_diplomatic_annex = {
	events = {
		610
	}
	FROM = {
		every_owned_province = {
			limit = { is_state_core = owner }
			set_province_flag = cu_state_core
		}
	}
}

# country
on_heir_death = {
	if = {
		limit = { has_country_flag = heir_dip_education }
		clr_ruler_flag = heir_dip_education
	}
	if = {
		limit = { has_country_flag = heir_mil_education }
		clr_ruler_flag = heir_mil_education
	}
	if = {
		limit = { has_country_flag = heir_adm_education }
		clr_ruler_flag = heir_adm_education
	}
	if = {
		limit = { has_ruler_flag = well_advised_tutored_heir }
		clr_ruler_flag = well_advised_tutored_heir
	}
	if = {
		limit = { has_ruler_flag = heir_went_on_grand_tour }
		clr_ruler_flag = heir_went_on_grand_tour
	}
	if = {
		limit = { has_country_flag = albrecht_achilles_flag }
		clr_country_flag = albrecht_achilles_flag #Death of original Albrecht Achilles
	}
	if = {
		limit = { has_ruler_flag = sancaga_cikma }
		clr_ruler_flag = sancaga_cikma
		every_owned_province = {
			limit = {
				has_province_modifier = heir_in_training
			}
			remove_province_modifier = heir_in_training
		}
	}
	if = {
		limit = { has_ruler_flag = returned_from_sancaga_sikma_province }
		clr_ruler_flag = returned_from_sancaga_sikma_province
	}
}

# country
on_queen_death = {
	
	if = {
		limit = { has_consort_flag = 10_years_anniversary }
		set_ruler_flag = had_10_years_anniversary
	}
	if = {
		limit = { has_consort_flag = 20_years_anniversary }
		set_ruler_flag = had_20_years_anniversary
	}
	if = {
		limit = { has_consort_flag = consort_has_affection_of_ruler }
		set_ruler_flag = consort_had_affection_of_ruler
	}

	if = {
		limit = {
			has_regency = no
			NOT = { has_ruler_flag = widow_widower }
		}
		set_ruler_flag = widow_widower
	}
	if = {
		limit = { has_consort_regency = no }
		random_owned_province = {
			limit = { has_province_modifier = domain_of_spouses_family }
			remove_province_modifier = domain_of_spouses_family
		}
	}
	if = {
		limit = { has_ruler_flag = accepted_help_from_spouses_family }
		clr_ruler_flag = accepted_help_from_spouses_family
	}
	if = {
		limit = { has_ruler_flag = helped_spouses_family }
		clr_ruler_flag = helped_spouses_family
	}
	if = {
		limit = { has_ruler_flag = refused_to_help_spouses_family }
		clr_ruler_flag = refused_to_help_spouses_family
	}
	if = {
		limit = { has_ruler_flag = lowborn_consort }
		random_owned_province = {
			limit = { has_province_modifier = home_of_consort }
			remove_province_modifier = home_of_consort
		}
	}
	if = {
		limit = { has_ruler_flag = lowborn_consort }
		clr_ruler_flag = lowborn_consort
	}
	if = {
		limit = { has_country_modifier = consort_adm_advice }
		remove_country_modifier = consort_adm_advice
	}
	if = {
		limit = { has_country_modifier = consort_dip_advice }
		remove_country_modifier = consort_dip_advice
	}
	if = {
		limit = { has_country_modifier = consort_mil_advice }
		remove_country_modifier = consort_mil_advice
	}
	if = {
		limit = { has_country_modifier = without_spouse_advice }
		remove_country_modifier = without_spouse_advice
	}
	if = {
		limit = { has_ruler_modifier = affectionate_royal_couple }
		remove_country_modifier = affectionate_royal_couple
	}
	clr_ruler_flag = marriage_length
}

# country
on_new_heir = {
}

# country 
on_weak_heir_claim = {
	events = {
		611		# Pretenders rise up
	}
}

# country : no heir in theocracy
on_heir_needed_theocracy = {
	events = {
		theocracy.1
	}
}

# Emperor from same dynasty
on_successive_emperor = {
	events = {
		900
	}
}

# HRE Prince released by the emperor
on_released_hre_member = {
	events = {
	}
	cu_correct_year = yes
	cu_calc_country_dist = yes
	cu_calc_country_absolute_dist = yes	
}

# HRE Prince converts to non-Emperor religion
on_hre_member_false_religion = {
	events = {
	}
}

# HRE Prince converts to Emperor religion
on_hre_member_true_religion = {
	events = {
	}
}

# Emperor wins HRE defensive war
on_hre_wins_defensive_war = {
	events = {
	}
}

# HRE member annexed by non-HRE country
on_hre_member_annexed = {
	events = {
	}
}

# HRE member released from non-HRE vassalage
on_hre_released_vassal = {
	events = {
	}
}

# HRE member transferred from non-HRE vassalage to Emperor
on_hre_transfered_vassal = {
	events = {
	}
}

# Emperor coming to the defense of a HRE member
on_hre_defense = {
	events = {
	}
}

# Emperor NOT coming to the defense of a HRE member
on_hre_non_defense = {
	events = {
		909
	}
}

# HRE Member takes a HRE province from an outs100e country in a peace (province scope)
on_hre_province_reconquest = {
    set_variable = { which = cu_var1 value = 3 }
	cu_add_cultural_acceptance = yes
	events = {
	}
}

on_lock_hre_religion = {
	events = {
		religious_leagues.1
		religious_leagues.8
	}
}

on_change_hre_religion = {
	events = {
		religious_leagues.2
		religious_leagues.3
	}
}

on_hre_religion_white_peace = {
	events = {
		religious_leagues.4
	}
}

# When a non-native changes government type
on_government_change = {
	if = {
		limit = {
			NOT = { government = monarchy }
			any_owned_province = {
				has_province_modifier = domain_of_spouses_family
			}
		}
		random_owned_province = {
			limit = { has_province_modifier = domain_of_spouses_family }
			remove_province_modifier = domain_of_spouses_family
		}
	}
	if = {
		limit = {
			NOT = { government = monarchy }
			any_owned_province = {
				has_province_modifier = home_of_consort
			}
		}
		random_owned_province = {
			limit = { has_province_modifier = home_of_consort }
			remove_province_modifier = home_of_consort
		}
	}
	if = {
		limit = {
			OR = {
				tag = ENG
				tag = GBR
			}
			any_owned_province = {
				has_province_modifier = rotten_borough
			}
		}
		every_owned_province = {
			limit = {
				has_province_modifier = rotten_borough
			}
			remove_province_modifier = rotten_borough
		}
	}
}

# When a native changes government after filling all their advancement groups.
on_native_change_government = {
    every_owned_province = {
	       cu_calc_base_cultural_acceptance = yes
	}
}

# Nation is integrated after being in union
on_integrate = {
	events = {
		610
	}
	FROM = {
		every_owned_province = {
			limit = { is_state_core = owner }
			set_province_flag = cu_state_core
		}
	}
}

# Nation annexed.
# FROM is the nation being annexed
on_annexed = {
	events = {
		celestial_empire_events.1 # Empire dismantled
	}
	FROM = {
		if = {
			limit = { is_emperor_of_china = yes }
			dismantle_empire_of_china = yes
			set_global_flag = empire_of_china_dismantled
		}
	}
}

# When the chinese empire gets dismantled (e.g. when the emperor is annexed)
# FROM = Emperor, ROOT = Current Nation
on_chinese_empire_dismantled = {
	events = {
		
	}
}

# When a nation gains the Mandate of Heaven (becomes the Emperor of China)
# FROM = Old Emperor, ROOT = New Emperor
on_mandate_of_heaven_gained = {
	if = {
		limit = {
			technology_group = nomad_group
		}
		change_technology_group = chinese
		change_unit_type = chinese
	}
	if = {
		limit = {
			NOT = { has_reform =  celestial_empire }
		}
		add_government_reform =  celestial_empire_2
	}
	
	set_mandate = 60
	china_superregion = {
		limit = {
			NOT = { is_core = ROOT }
		}
		add_permanent_claim = ROOT
	}
	if = {
		limit = {
			has_dlc = "Mandate of Heaven"
			has_global_flag = test_version
		}
		remove_faction = temples
		remove_faction = enuchs
		remove_faction = bureaucrats
	}
	if = {
		limit = {
			has_country_modifier = lost_mandate_of_heaven
		}
		remove_country_modifier = lost_mandate_of_heaven
	}
	country_event = { #Reforming the Bureaucracy
		id = china_events.31
		days = 365
	}
	country_event = {
		id = china_events.32 #Records of the last Empire
		days = 183
	}
	country_event = {
		id = celestial_empire_events.2
		days = 1825
	}
}

# When a nation loses the Mandate of Heaven
# FROM = New Emperor, ROOT = Old Emperor
on_mandate_of_heaven_lost = {
}

on_dismantle_revolution = {
	add_government_reform = autocracy_reform
	kill_ruler = yes
	set_revolution_target = ---
	if = {
		limit = { has_heir = yes }
		kill_heir = yes
	}
}

# province
on_adm_development = {       
       add_base_tax = -1
	   refresh_province_data = yes
	   if = { #Prevent abusing this to reduce subject's liberty desire.
	         limit = { 
			        owner = {
   					   ai = yes 
			           is_subject = yes
					}
			 }
			 owner = { add_liberty_desire = 20 }
	   }
	   if = {
	        limit = { 
			         has_global_flag = cu_start 
					 owner = { ai = no }
			}
			province_event = { id = urban.50 }
	   }
}

# province
on_dip_development = {
       add_base_production = -1
	   refresh_province_data = yes
	   if = { #Prevent abusing this to reduce subject's liberty desire.
	         limit = { 
			        owner = {
   					   ai = yes 
			           is_subject = yes
					}
			 }
			 owner = { add_liberty_desire = 20 }
	   }
       if = {
	        limit = { 
			         has_global_flag = cu_start 
					 owner = { ai = no }
			}
			province_event = { id = urban.50 }
	   }
}

# province
on_mil_development = {
       add_base_manpower = -1
	   refresh_province_data = yes
	   if = { #Prevent abusing this to reduce subject's liberty desire.
	         limit = { 
			        owner = {
   					   ai = yes 
			           is_subject = yes
					}
			 }
			 owner = { add_liberty_desire = 20 }
	   }
       if = {
	        limit = { 
			         has_global_flag = cu_start 
					 owner = { ai = no }
			}
			province_event = { id = urban.50 }
	   }
}

on_overextension_pulse = {
	random_events = {
		100 = overextension.1
		100 = overextension.2
		100 = overextension.3
		100 = overextension.4
		100 = overextension.5
		100 = overextension.6
		100 = overextension.7
		100 = overextension.8
		100 = overextension.9
		100 = overextension.10
	}
}

on_colonial_pulse = {
	random_events = {
		100 = colonial.1
		100 = colonial.2
		100 = colonial.3
		100 = colonial.4
		100 = colonial.5
		100 = colonial.8
		100 = colonial.9
		100 = colonial.10
		100 = colonial.11
		100 = colonial.12
		100 = colonial.13
		100 = colonial.14
		100 = colonial.15
		100 = colonial.16
		100 = colonial.17
		100 = colonial.18
		10000 = 0
	}
}

on_siberian_pulse = {
}


# country random events
on_bi_yearly_pulse = {
	random_events = {
		# randomevents.txt		
		100 = 3051
		100 = 5008
		100 = 5014
		100 = 5015
		100 = 5017
		100 = 5018
		100 = 5019
		100 = 5020
		100 = 5021
		100 = 5022
		100 = 5023
		100 = 5024
		100 = 5025
		100 = 5027
		100 = 5032
		100 = 5040
		100 = 5045
		100 = 5050
		100 = 5051
		100 = 5052
		100 = 5053
		100 = 5054
		100 = 5055
		100 = 5056
		100 = 5058
		100 = 5059
		100 = 5060
		100 = 5061
		100 = 5064
		100 = 5065
		100 = 5066
		100 = 5068
		100 = 5070
		100 = 5071
		100 = 5072
		100 = 5074
		100 = 5075
		100 = 5076
		100 = 5077
		100 = 5082
		100 = 5083
		100 = 5084
		100 = 5085
		100 = 5086
		100 = 5088
		100 = 5089
		100 = 5090
		100 = 5091
		100 = 5092
		100 = 5093
		100 = 5094
		100 = 5095
		100 = 5096
		100 = 5097
		100 = 5098
		100 = 5099
		100 = 6000
		100 = 6001
		100 = 6003
		100 = 6004
		100 = 6005
		100 = 6006
		100 = 6012
		100 = 6013
		100 = 6015
		100 = 710
		100 = 711
		100 = 712
		100 = 713
		100 = 714
		100 = 715
		100 = 716
		100 = 717
		100 = 718
		100 = 719
		100 = 720
		100 = 722
		100 = 723
		100 = 724
		100 = 725
		100 = 726
		100 = 727
		100 = 728
		100 = 729
		100 = 730
		100 = 731
		100 = 732
		100 = 733
		100 = 734
		100 = 735
		100 = 736
		100 = 737
		100 = 738
		100 = 739
		100 = 740
		100 = 741
		100 = 742
		
		100 = 850
		100 = 851
		100 = 852
		100 = 853
		100 = 854
		100 = 855
		100 = 857
		100 = 858
		100 = 859
		100 = 860
		100 = 861
		100 = 862
		100 = 863
		100 = 864
		100 = 865
		100 = 866
		100 = 867
		100 = 868
		100 = 869
		100 = 870
		100 = 871
		100 = 872
		100 = 873
		100 = 874
		100 = 875
		100 = 876
		100 = 877
		100 = 878
		100 = 879
		100 = 880
		100 = 881
		100 = 882
		100 = 883
		100 = 884
		100 = 885
		100 = 836
		100 = 837
		100 = 838
		
		100 = 9472
		100 = 3097
		100 = 5005
		100 = 5026
		100 = 5037
		100 = 5063
		100 = 6014
		
		100 = random_event.1
		100 = random_event.2
		100 = random_event.3
		100 = random_event.4
		100 = random_event.5
		100 = random_event.6
		100 = random_event.7
		100 = random_event.8
		100 = random_event.9
		100 = random_event.10
		100 = random_event.11
		100 = random_event.12
		100 = random_event.13
		100 = random_event.14
		100 = random_event.15
		100 = random_event.16
		
		100 = random_event.26
		
		#Culture and Religion Events
		125 = culture_religion_events.1
		125 = culture_religion_events.3
		125 = culture_religion_events.4
		125 = culture_religion_events.5
		125 = culture_religion_events.6
		125 = culture_religion_events.7
		125 = culture_religion_events.8
		125 = culture_religion_events.9
		125 = culture_religion_events.10
		125 = culture_religion_events.11
		125 = culture_religion_events.12
		125 = culture_religion_events.13
		125 = culture_religion_events.14
		125 = culture_religion_events.15
		125 = culture_religion_events.16
		100 = culture_religion_events.17
		125 = culture_religion_events.18
		125 = culture_religion_events.19
		125 = culture_religion_events.20
		175 = culture_religion_events.21
		125 = culture_religion_events.22
		125 = culture_religion_events.23
		
		#Mamluk Events
		
		175 = mamluk_events.1
		175 = mamluk_events.2
		175 = mamluk_events.3
		235 = mamluk_events.4
		185 = mamluk_events.5
		175 = mamluk_events.6
		250 = mamluk_events.7
		185 = mamluk_events.10
		185 = mamluk_events.11
		235 = mamluk_events.12

		#Colonization of Siberia
		125 = siberian_events.2
		125 = siberian_events.3
		125 = siberian_events.4
		125 = siberian_events.5
		125 = siberian_events.6
		
		#Russian Principalities
		
		100 = russian_principality_events.1
		125 = russian_principality_events.2
		125 = russian_principality_events.3
		125 = russian_principality_events.4
		125 = russian_principality_events.6
		125 = russian_principality_events.5
		125 = russian_principality_events.7
		100 = russian_principality_events.8
		75 = russian_principality_events.9
		125 = russian_principality_events.10
		
		#Tsardoms
		
		125 = russian_tsardom_events.1
		125 = russian_tsardom_events.2
		125 = russian_tsardom_events.3
		100 = russian_tsardom_events.4
		125 = russian_tsardom_events.5
		100 = russian_tsardom_events.6
		100 = russian_tsardom_events.7
		100 = russian_tsardom_events.8
		125 = russian_tsardom_events.9
		125 = russian_tsardom_events.10
		100 = russian_tsardom_events.11
		
		#Streltsy Events
		125 = streltsy_events.1
		125 = streltsy_events.3
		125 = streltsy_events.4
		125 = streltsy_events.5
		100 = streltsy_events.6
		
		#Orthodox Metropolitans
		125 = patriarch_events.1
		125 = patriarch_events.2
		125 = patriarch_events.3
		75 = patriarch_events.4
		75 = patriarch_events.5
		
		# Old Centralisation/Decentralisation
		100 = 806

		# Mercantilism
		100 = 6326
		100 = 6327
		100 = 6328
		100 = 6329

		# Trade Specific
		100 = trade.1
		100 = trade.2
		100 = trade.3
		100 = trade.4
		100 = trade.5
		100 = trade.6
		100 = trade.7
		100 = trade.8
		100 = trade.9
		100 = trade.10
		100 = trade.11
		100 = trade.12
		
		# Catholic  Events      
		100 = catholic_flavor.4 
		100 = catholic_flavor.5 
		100 = catholic_flavor.6 
		100 = catholic_flavor.7 
		100 = catholic_flavor.8 
		100 = catholic_flavor.9 
		100 = catholic_flavor.10
		
		# Tradegoods events
		100 = 6418
		100 = 6419
		100 = 6420
		100 = 6421
		100 = 6422
		100 = 6423
		100 = 6424
		100 = 6425
		100 = 6426
		100 = 6427
		100 = 6428
		100 = 6429
		100 = 6431
		100 = 6432
		100 = 6433
		100 = 6434

		# Refoms, when having parliaments.
		100 = reforms.1
		100 = reforms.2
		100 = reforms.3
		100 = reforms.4		

		100 = randomeventsstapehordes.1
		100 = randomeventsstapehordes.2
		100 = randomeventsstapehordes.3
		100 = randomeventsstapehordes.4
		100 = randomeventsstapehordes.5
		100 = randomeventsstapehordes.6
		100 = randomeventsstapehordes.7
		100 = randomeventsstapehordes.8
		100 = randomeventsstapehordes.13
		100 = randomeventsstapehordes.14
		100 = randomeventsstapehordes.17		
		100 = randomeventsstapehordes.19
		100 = randomeventsstapehordes.20
		100 = randomeventsstapehordes.21
		100 = randomeventsstapehordes.22
		100 = randomeventsstapehordes.23
		100 = randomeventsstapehordes.24

		# Sailor events
		100 = sailor_event.1
		100 = sailor_event.2
		100 = sailor_event.3
		100 = sailor_event.4
		100 = sailor_event.5

		# Corruption Events
		100 = corruption_event.16
		100 = corruption_event.17
		100 = corruption_event.18
		100 = corruption_event.19
		100 = corruption_event.20

		# Trade League Events
		100 = trade_league.1
		100 = trade_league.2
		100 = trade_league.3
		100 = trade_league.4
		100 = trade_league.7
		100 = trade_league.8
		100 = trade_league.9
		100 = trade_league.10
		100 = trade_league.11
		100 = trade_league.12
		100 = trade_league.13
		100 = trade_league.14
		
		# Institution Events
		#Feudalism Spread Events:
		100 = institution_events.8
		100 = institution_events.9
		100 = institution_events.10
		100 = institution_events.11
		
		
		#Personality Events
		50 = personality_events.10 #Just Dilema
		50 = personality_events.11 #A righteous King
		50 = personality_events.12 #A Righteous Republican Ruler
		50 = personality_events.13
		50 = personality_events.14
		50 = personality_events.15
		50 = personality_events.16
		50 = personality_events.17
		50 = personality_events.18
		50 = personality_events.19
		50 = personality_events.20
		50 = personality_events.21
		50 = personality_events.22
		50 = personality_events.23
		50 = personality_events.24
		50 = personality_events.25
		50 = personality_events.26
		50 = personality_events.27
		50 = personality_events.28
		50 = personality_events.29
		50 = personality_events.30
		50 = personality_events.31
		50 = personality_events.32
		50 = personality_events.33
		50 = personality_events.34
		50 = personality_events.35
		50 = personality_events.36
		50 = personality_events.37
		50 = personality_events.38
		50 = personality_events.39
		50 = personality_events.40
		50 = personality_events.41
		50 = personality_events.42
		50 = personality_events.43
		50 = personality_events.44
		50 = personality_events.45
		50 = personality_events.46
		50 = personality_events.47
		50 = personality_events.48
		50 = personality_events.49
		50 = personality_events.50
		50 = personality_events.51
		50 = personality_events.52
		50 = personality_events.53
		50 = personality_events.54
		50 = personality_events.55
		50 = personality_events.56
		50 = personality_events.57
		50 = personality_events.58
		
		#Industrial Revolution
		
		200 = industrialization_events.7
		200 = industrialization_events.8
		200 = industrialization_events.9
		200 = industrialization_events.10
		200 = industrialization_events.11
		200 = industrialization_events.12
		200 = industrialization_events.13
		200 = industrialization_events.14
		200 = industrialization_events.15
		200 = industrialization_events.16
		200 = industrialization_events.17
		200 = industrialization_events.18
		200 = industrialization_events.19
		200 = industrialization_events.20
		200 = industrialization_events.21
		200 = industrialization_events.22
		
		#Confucian Events
		75 = confucian_events.19
		75 = confucian_events.20
		
		# Orthodox Icon Events
		75 = orthodox_icon_events.1
		75 = orthodox_icon_events.3
		75 = orthodox_icon_events.4
		75 = orthodox_icon_events.5
		75 = orthodox_icon_events.6
		
		# Anglican Events
		100 = anglican_events.1
		100 = anglican_events.2
		100 = anglican_events.3
		100 = anglican_events.4
		100 = anglican_events.5
		100 = anglican_events.6
		100 = anglican_events.7
		100 = anglican_events.8
		100 = anglican_events.9
		100 = anglican_events.10
		100 = anglican_events.11
		100 = anglican_events.12
		100 = anglican_events.13
		150 = anglican_events.15
		
		# Innovativeness
		100 = innovativeness_events.1
		100 = innovativeness_events.2
		100 = innovativeness_events.3
		100 = innovativeness_events.4
		100 = innovativeness_events.5
		100 = innovativeness_events.6
		100 = innovativeness_events.7
		100 = innovativeness_events.8
		100 = innovativeness_events.9
		100 = innovativeness_events.10
		100 = innovativeness_events.11
		100 = innovativeness_events.12
		100 = innovativeness_events.13
		100 = innovativeness_events.14
		100 = innovativeness_events.15
		
		1250 = 0
	}
}

on_bi_yearly_pulse_2 = {
	random_events = {
		100 = corruption_event.1
		100 = corruption_event.2
		100 = corruption_event.3
		100 = corruption_event.4
		100 = corruption_event.5
		100 = corruption_event.6
		100 = corruption_event.7
		100 = corruption_event.8
		100 = corruption_event.9
		100 = corruption_event.10
		200 = corruption_event.11
		200 = corruption_event.12
		200 = corruption_event.13
		200 = corruption_event.14
		200 = corruption_event.15

		4000 = 0
	}
}

on_bi_yearly_pulse_3 = {
	events = {
		muslim_school_events.20 #Pick School
	}
}

on_bi_yearly_pulse_4 = {
}

# country random events
on_thri_yearly_pulse = {
	random_events = {
		# Republics
		100 = republics.4
		100 = republics.5
		100 = republics.6
		100 = republics.7
		100 = republics.8
		100 = republics.9
		100 = republics.10
		100 = republics.11
		100 = republics.12
		100 = republics.13
		100 = republics.14
		100 = republics.15
		100 = republics.16
		100 = republics.17
		100 = republics.18
		100 = republics.19
		100 = republics.20
		100 = republics.21
		100 = republics.22
		100 = republics.23
		100 = republics.24
		100 = republics.25
		100 = republics.26
		100 = republics.27
		100 = republics.28
		100 = republics.29
		100 = republics.30
		100 = republics.31
		100 = republics.32
		100 = republics.33
		100 = republics.34
		100 = republics.35
		100 = republics.36
		100 = republics.37
		100 = republics.38
		100 = republics.39
		100 = republics.40
		100 = republics.41
		100 = republics.42
		100 = republics.43		
		
		# Theocracies
		100 = devotion_events.1
		100 = devotion_events.2
		100 = devotion_events.3
		100 = devotion_events.4
		100 = devotion_events.5
		100 = devotion_events.6
		100 = devotion_events.7
		100 = devotion_events.8
		100 = devotion_events.9
		100 = devotion_events.10
		100 = devotion_events.11
		100 = devotion_events.12
		100 = devotion_events.13
		100 = devotion_events.14
		100 = devotion_events.15
		100 = devotion_events.16
		100 = devotion_events.18
		100 = devotion_events.19
		100 = devotion_events.22
		100 = devotion_events.23
		100 = devotion_events.24
		100 = devotion_events.26
		100 = devotion_events.100
		100 = devotion_events.101
		100 = devotion_events.102
		100 = devotion_events.104
		100 = devotion_events.107
		100 = devotion_events.110
		100 = devotion_events.117
		100 = devotion_events.118
		100 = devotion_events.119
		100 = devotion_events.200
		100 = devotion_events.201
		100 = devotion_events.202
		100 = devotion_events.203
		100 = devotion_events.204
		100 = devotion_events.205
		100 = devotion_events.207
		100 = devotion_events.208
		100 = devotion_events.209
		100 = devotion_events.210
		100 = devotion_events.211
		100 = devotion_events.212
		100 = devotion_events.213
		100 = devotion_events.214
		100 = devotion_events.215
		100 = devotion_events.216
		100 = devotion_events.217
		100 = devotion_events.218
		100 = devotion_events.219

		# Japanese Daimyos
		15 = flavor_jap.10
		50 = flavor_jap.28
		100 = flavor_jap.40
		100 = flavor_jap.42
		100 = flavor_jap.43
		100 = flavor_jap.45
		100 = flavor_jap.49
		100 = flavor_jap.51
		100 = flavor_jap.52
		100 = flavor_jap.53
		100 = flavor_jap.54
		100 = flavor_jap.55
		

		
		# China
		75 = meritocracy_events.1
		75 = meritocracy_events.2
		75 = meritocracy_events.3
		75 = meritocracy_events.4
		75 = meritocracy_events.5
		50 = china_events.11
		25 = china_events.12
		25 = china_events.24
		
		1000 = 0		
	}
}

on_thri_yearly_pulse_2 = {
	random_events = {
		# Random to increase or decrease patriarch authority.
		25 = orthodox_flavor.1
		25 = orthodox_flavor.2
		25 = orthodox_flavor.3
		25 = orthodox_flavor.4
		25 = orthodox_flavor.5
		
		# Muslim Piety Events
		40 = muslim_piety.1
		40 = muslim_piety.2
		40 = muslim_piety.3
		40 = muslim_piety.4
		40 = muslim_piety.5
		40 = muslim_piety.6
		40 = muslim_piety.7
		40 = muslim_piety.8
		40 = muslim_piety.9
		40 = muslim_piety.10
		40 = muslim_piety.11
		40 = muslim_piety.12
		40 = muslim_piety.13
		40 = muslim_piety.14
		40 = muslim_piety.15
		40 = muslim_piety.16
		40 = muslim_piety.22
		300 = 0		
	}
}

on_thri_yearly_pulse_3 = {
	random_events = {
		# Subject Interactions
		50 = subject_interaction_events.1
		50 = subject_interaction_events.4
		50 = subject_interaction_events.5
		50 = subject_interaction_events.6
		50 = subject_interaction_events.7
		50 = subject_interaction_events.9
		50 = subject_interaction_events.11
		50 = subject_interaction_events.14
		50 = subject_interaction_events.15
		50 = subject_interaction_events.17
		50 = subject_interaction_events.18
		50 = subject_interaction_events.19
		50 = subject_interaction_events.20
		50 = subject_interaction_events.21
		50 = subject_interaction_events.22
		50 = subject_interaction_events.23
		50 = subject_interaction_events.24
		50 = subject_interaction_events.25
		50 = subject_interaction_events.26
		50 = subject_interaction_events.27
		50 = subject_interaction_events.29
		50 = subject_interaction_events.30
		50 = subject_interaction_events.31
		50 = subject_interaction_events.32
		50 = subject_interaction_events.34
		50 = subject_interaction_events.35
		50 = subject_interaction_events.36
		50 = subject_interaction_events.38
		50 = subject_interaction_events.40
		50 = subject_interaction_events.43
		75 = tributary_events.1
		75 = tributary_events.2
		75 = tributary_events.3
		75 = tributary_events.4
		75 = tributary_events.5
		75 = tributary_events.6
		75 = tributary_events.7
		75 = tributary_events.8
		75 = tributary_events.9
		75 = tributary_events.10
		75 = tributary_events.13
		75 = tributary_events.16
		75 = tributary_events.17
		75 = tributary_events.18
		75 = tributary_events.19
		75 = tributary_events.23
		75 = tributary_events.24
		75 = tributary_events.26
		75 = tributary_events.25
		75 = tributary_events.27

		1000 = 0
	}
}

on_thri_yearly_pulse_4 = {
	random_events = {
		#Low Mandate Events
		10 = china_events.45
		10 = china_events.46
		50 = china_events.47
		10 = china_events.48
		10 = china_events.49
		10 = china_events.50
		50 = china_events.51
		10 = china_events.52
		10 = china_events.53
		50 = china_events.54
		#10 = china_events.55 (triggers via neighbors)
		10 = china_events.56
		75 = china_events.57
		50 = china_events.58
		10 = china_events.59
		50 = china_events.60
	}
}

on_four_year_pulse = {
	random_events = {
		# Colonial Nations
		100 = colonial_nation.1
		100 = colonial_nation.4
		100 = colonial_nation.10
		100 = colonial_nation.12
		100 = colonial_nation.14
		100 = colonial_nation.77
		100 = colonial_nation.100
		100 = colonial_nation.102
		100 = colonial_nation.104
		100 = colonial_nation.106
		100 = colonial_nation.108
		100 = colonial_nation.110
		100 = colonial_nation.112
		100 = colonial_nation.114
		100 = colonial_nation.116
		100 = colonial_nation.118
		100 = colonial_nation.120
		100 = colonial_nation.122
		100 = colonial_nation.124
		100 = colonial_nation.126
		100 = colonial_nation.128
		100 = colonial_nation.130
		100 = colonial_nation.132
		100 = colonial_nation.134
		10 = colonial_nation.140
		10 = colonial_nation.142
		10 = colonial_nation.144
		10 = colonial_nation.146
		10 = colonial_nation.148
		10 = colonial_nation.150
		10 = colonial_nation.152
		10 = colonial_nation.154
		10 = colonial_nation.156
		10 = colonial_nation.158
		10 = colonial_nation.160
		10 = colonial_nation.162
		10 = colonial_nation.164
		10 = colonial_nation.166
		10 = colonial_nation.168
		10 = colonial_nation.170
		10 = colonial_nation.172
		10 = colonial_nation.174
		10 = colonial_nation.176

		# Dutch Republic
		100 = dutch_republic.1
		100 = dutch_republic.2
		100 = dutch_republic.3
		100 = dutch_republic.4
		100 = dutch_republic.5
		100 = dutch_republic.6
		100 = dutch_republic.7
		100 = dutch_republic.8
		100 = dutch_republic.9
		100 = dutch_republic.10
		150 = dutch_republic.11
		100 = dutch_republic.13
		100 = dutch_republic.14
		100 = dutch_republic.15
		100 = dutch_republic.16
		100 = dutch_republic.17
		100 = dutch_republic.18
		100 = dutch_republic.19
		100 = dutch_republic.20
		100 = dutch_republic.21
		100 = dutch_republic.22
		100 = dutch_republic.23
		100 = dutch_republic.24
		100 = dutch_republic.25
		100 = dutch_republic.27
		
		# Republic Factions
		100 = republic_factions.2
		100 = republic_factions.5
		100 = republic_factions.7
		100 = republic_factions.9
		100 = republic_factions.10
		100 = republic_factions.12
		100 = republic_factions.13
		100 = republic_factions.14
		100 = republic_factions.15
		100 = republic_factions.16
		100 = republic_factions.17
		100 = republic_factions.18
		100 = republic_factions.19
		100 = republic_factions.20
		100 = republic_factions.22
		100 = republic_factions.23
		100 = republic_factions.24

                # Revolutionary Republic Factions
		
		100 = revolutionary_republic_factions.0
		100 = revolutionary_republic_factions.1
		100 = revolutionary_republic_factions.2
		100 = revolutionary_republic_factions.3
		100 = revolutionary_republic_factions.4
		100 = revolutionary_republic_factions.5
		100 = revolutionary_republic_factions.6
		100 = revolutionary_republic_factions.7
		100 = revolutionary_republic_factions.8
		100 = revolutionary_republic_factions.9

		# Republican Dictatorship
		100 = republican_dictatorship.1
		100 = republican_dictatorship.2
		100 = republican_dictatorship.3
		100 = republican_dictatorship.4
		100 = republican_dictatorship.5
		100 = republican_dictatorship.6
		100 = republican_dictatorship.7
		100 = republican_dictatorship.8

		# Elective Monarchy
		150 = elective_monarchy.1
		150 = elective_monarchy.2
		25 = elective_monarchy.3
		25 = elective_monarchy.4
		150 = elective_monarchy.6
		150 = elective_monarchy.8
		150 = elective_monarchy.9
		150 = elective_monarchy.10
		150 = elective_monarchy.11
		150 = elective_monarchy.12
		150 = elective_monarchy.14
		150 = elective_monarchy.17
		25 = elective_monarchy.18

		# Free Cities
		25 = free_cities.3
		25 = free_cities.7
		25 = free_cities.8
		25 = free_cities.10
		25 = free_cities.13
		25 = free_cities.17
		25 = free_cities.19
		
		#Tribal Federations
		50 = tribal_federation_events.1
		50 = tribal_federation_events.2
		50 = tribal_federation_events.3
		50 = tribal_federation_events.4
		50 = tribal_federation_events.5
		50 = tribal_federation_events.6
		50 = tribal_federation_events.7
		50 = tribal_federation_events.8
		50 = tribal_federation_events.10
		
		#Empire of China
		100 = china_events.1
		100 = china_events.2
		100 = china_events.3
		100 = china_events.4
		75 = china_events.5
		100 = china_events.6
		100 = china_events.7
		100 = china_events.8		
		100 = china_events.10		
		100 = china_events.12
		100 = china_events.13
		100 = china_events.14
		100 = china_events.15
		100 = china_events.16
		100 = china_events.17
		100 = china_events.18
		100 = china_events.19
		100 = china_events.20
		100 = china_events.21
		100 = china_events.22
		100 = china_events.23
		100 = china_events.24
		100 = china_events.25
		100 = china_events.26
		100 = china_events.27
		100 = china_events.28		
		100 = china_events.33
		100 = china_events.34
		100 = china_events.35
		100 = china_events.36
		100 = china_events.37		
		100 = china_events.39
		50 = china_events.40
		100 = china_events.41
		100 = china_events.42
		100 = china_events.44
		
		1000 = 0	
	}
}

on_four_year_pulse_2 = {
}

on_four_year_pulse_3 = {
}

on_four_year_pulse_4 = {
}

on_five_year_pulse = {

	random_events = {

		# Aristocracy 		13  (8g 5b)
		100 = ideagroups.100
		100 = ideagroups.101
		100 = ideagroups.102
		100 = ideagroups.103
		100 = ideagroups.104
		100 = ideagroups.105
		100 = ideagroups.106
		100 = ideagroups.107
		100 = ideagroups.108
		100 = ideagroups.109
		100 = ideagroups.110
		100 = ideagroups.111
		100 = ideagroups.112

	
		# Plutocracy 		19 (12g 7b)
		100 = ideagroups.200
		100 = ideagroups.201
		100 = ideagroups.202
		100 = ideagroups.203
		100 = ideagroups.204
		100 = ideagroups.205
		100 = ideagroups.206
		100 = ideagroups.207
		100 = ideagroups.208
		100 = ideagroups.209
		100 = ideagroups.210
		100 = ideagroups.211
		100 = ideagroups.212
		100 = ideagroups.213
		100 = ideagroups.214
		100 = ideagroups.215
		100 = ideagroups.216
		100 = ideagroups.217
		100 = ideagroups.218

		# Innovativenes		11 (7g 4b)
		100 = ideagroups.300
		100 = ideagroups.301
		100 = ideagroups.302
		100 = ideagroups.303
		100 = ideagroups.304
		100 = ideagroups.305
		100 = ideagroups.306
		100 = ideagroups.307
		100 = ideagroups.308
		100 = ideagroups.309
		100 = ideagroups.310

		# Religious		18 (11g 7b)
		100 = ideagroups.400
		100 = ideagroups.401
		100 = ideagroups.402
		100 = ideagroups.403
		100 = ideagroups.404
		100 = ideagroups.405
		100 = ideagroups.406
		100 = ideagroups.407
		100 = ideagroups.408
		100 = ideagroups.409
		100 = ideagroups.410
		100 = ideagroups.411
		100 = ideagroups.412
		100 = ideagroups.413
		100 = ideagroups.414
		100 = ideagroups.415
		100 = ideagroups.416
		100 = ideagroups.417
		

		# Spy			9 (6g 3b)
		100 = ideagroups.500
		100 = ideagroups.501
		100 = ideagroups.502
		100 = ideagroups.503
		100 = ideagroups.504
		100 = ideagroups.505
		100 = ideagroups.506
		100 = ideagroups.507
		100 = ideagroups.508
		
		
		# Diplomatic		9 (6g 3b)
		100 = ideagroups.600
		100 = ideagroups.601
		100 = ideagroups.602
		100 = ideagroups.603
		100 = ideagroups.604
		100 = ideagroups.605
		100 = ideagroups.606
		100 = ideagroups.607
		100 = ideagroups.608


		# Offensive 		14 (9g 5b)
		100 = ideagroups.700
		100 = ideagroups.701
		100 = ideagroups.702
		100 = ideagroups.703
		100 = ideagroups.704
		100 = ideagroups.705
		100 = ideagroups.706
		100 = ideagroups.707
		100 = ideagroups.708
		100 = ideagroups.709
		100 = ideagroups.710
		100 = ideagroups.711
		100 = ideagroups.712
		100 = ideagroups.713

		
		# Defensive		11 (5g 6b)
		100 = ideagroups.800
		100 = ideagroups.801
		100 = ideagroups.802
		100 = ideagroups.803
		100 = ideagroups.804
		100 = ideagroups.805
		100 = ideagroups.806
		100 = ideagroups.807
		100 = ideagroups.808
		100 = ideagroups.809
		100 = ideagroups.810
		100 = ideagroups.811
		100 = ideagroups.812
		100 = ideagroups.813
		100 = ideagroups.814
		100 = ideagroups.815

		
		# Trade			6 (7g 4b)
		100 = ideagroups.900
		100 = ideagroups.901
		100 = ideagroups.902
		100 = ideagroups.903
		100 = ideagroups.904
		100 = ideagroups.905
		100 = ideagroups.906
		100 = ideagroups.907
		100 = ideagroups.908
		100 = ideagroups.909
		100 = ideagroups.910
		
		# Maritime			22 (14g 8b)
		100 = ideagroups.1000
		100 = ideagroups.1001
		100 = ideagroups.1002
		100 = ideagroups.1003
		100 = ideagroups.1004
		100 = ideagroups.1005
		100 = ideagroups.1006
		100 = ideagroups.1007
		100 = ideagroups.1008
		100 = ideagroups.1009
		100 = ideagroups.1010
		100 = ideagroups.1011
		100 = ideagroups.1012
		100 = ideagroups.1013
		100 = ideagroups.1014
		100 = ideagroups.1015
		100 = ideagroups.1016
		100 = ideagroups.1017
		100 = ideagroups.1018
		100 = ideagroups.1019
		100 = ideagroups.1020
		100 = ideagroups.1021
		
		# Economic		11 (7g 4b)
		100 = ideagroups.1100
		100 = ideagroups.1101
		100 = ideagroups.1102
		100 = ideagroups.1103
		100 = ideagroups.1104
		100 = ideagroups.1105
		100 = ideagroups.1106
		100 = ideagroups.1107
		100 = ideagroups.1108
		100 = ideagroups.1109
		100 = ideagroups.1110
		
		# Exploration		11 (7g 4b)
		100 = ideagroups.1200
		100 = ideagroups.1201
		100 = ideagroups.1202
		100 = ideagroups.1203
		100 = ideagroups.1204
		100 = ideagroups.1205
		100 = ideagroups.1206
		100 = ideagroups.1207
		100 = ideagroups.1208
		100 = ideagroups.1209
		100 = ideagroups.1210
		
		# Quality		11 (7g 4b)
		100 = ideagroups.1300
		100 = ideagroups.1301
		100 = ideagroups.1302
		100 = ideagroups.1303
		100 = ideagroups.1304
		100 = ideagroups.1305
		100 = ideagroups.1306
		100 = ideagroups.1307
		100 = ideagroups.1308
		100 = ideagroups.1309
		100 = ideagroups.1310
		
		# Quantity		11 (7g 4b)
		100 = ideagroups.1400
		100 = ideagroups.1401
		100 = ideagroups.1402
		100 = ideagroups.1403
		100 = ideagroups.1404
		100 = ideagroups.1405
		100 = ideagroups.1406
		100 = ideagroups.1407
		100 = ideagroups.1408
		100 = ideagroups.1409
		100 = ideagroups.1410
		

		# Expansion		11 (7g 4b)
		100 = ideagroups.1500
		100 = ideagroups.1501
		100 = ideagroups.1502
		100 = ideagroups.1503
		100 = ideagroups.1504
		100 = ideagroups.1505
		100 = ideagroups.1506
		100 = ideagroups.1507
		100 = ideagroups.1508
		100 = ideagroups.1509
		100 = ideagroups.1510
		
		# Bureaucratic	3 (1g 2b)
		100 = ideagroups.1600
		100 = ideagroups.1601
		100 = ideagroups.1602
		100 = ideagroups.1603
		100 = ideagroups.1604
		100 = ideagroups.1605
		100 = ideagroups.1606
		100 = ideagroups.1607
		100 = ideagroups.1608
		100 = ideagroups.1609
		100 = ideagroups.1610
		
		# Constitutional 
		100 = ideagroups.4890
		100 = ideagroups.4891

		# Naval		11 (7g 4b)
		100 = ideagroups.1700
		100 = ideagroups.1701
		100 = ideagroups.1702
		100 = ideagroups.1703
		100 = ideagroups.1704
		100 = ideagroups.1705
		100 = ideagroups.1706
		100 = ideagroups.1707
		100 = ideagroups.1708
		100 = ideagroups.1709
		100 = ideagroups.1710

		# Influence		11 (7g 4b)
		100 = ideagroups.1800
		100 = ideagroups.1801
		100 = ideagroups.1802
		100 = ideagroups.1803
		100 = ideagroups.1804
		100 = ideagroups.1805
		100 = ideagroups.1806
		100 = ideagroups.1807
		100 = ideagroups.1808
		100 = ideagroups.1809
		100 = ideagroups.1810
		
		# Humanist		11 (7g 4b)
		100 = ideagroups.1900
		100 = ideagroups.1901
		100 = ideagroups.1902
		100 = ideagroups.1903
		100 = ideagroups.1904
		100 = ideagroups.1905
		100 = ideagroups.1906
		100 = ideagroups.1907
		100 = ideagroups.1908
		100 = ideagroups.1909
		100 = ideagroups.1910
		
		#Culture 
		100 = ideagroups.4943
		100 = ideagroups.4944
		100 = ideagroups.4945
		
		1000 = 0
	}
	
	events = {
		seven_cities_events.1000 #Clearing of Seven Cities Hunt when goal is no longer possible
	}
}


# Estates pulse
on_five_year_pulse_2 = {
	random_events = {	
		# Burghers	
		100 = burghers_estate_events.1
		100 = burghers_estate_events.2
		100 = burghers_estate_events.3
		100 = burghers_estate_events.4
		100 = burghers_estate_events.5
		100 = burghers_estate_events.6
		100 = burghers_estate_events.7
		100 = burghers_estate_events.8
		100 = burghers_estate_events.9
		400 = burghers_estate_events.10 #Demands
		100 = burghers_estate_events.11 #Bonus
		100 = burghers_estate_events.12
		100 = burghers_estate_events.13
		400 = burghers_estate_events.14 #Demands
		100 = burghers_estate_events.15 #Disloyal
		# Nobles
		100 = nobles_estate_events.1 #Demands
		100 = nobles_estate_events.2
		100 = nobles_estate_events.3
		100 = nobles_estate_events.4
		400 = nobles_estate_events.5 #Demands
		100 = nobles_estate_events.6
		100 = nobles_estate_events.7
		400 = nobles_estate_events.8 #Disloyal
		400 = nobles_estate_events.9 #Disloyal
		50 = nobles_estate_events.10
		100 = nobles_estate_events.11 #Bonus
		# Clergy
		100 = church_estate_events.1
			#Regional Variations:
			100 = church_estate_events.101 
			100 = church_estate_events.102
			100 = church_estate_events.103
			100 = church_estate_events.104
			100 = church_estate_events.105
		100 = church_estate_events.2
		100 = church_estate_events.3
		100 = church_estate_events.4
		400 = church_estate_events.5 #Disloyal
		400 = church_estate_events.6 #Demands
		100 = church_estate_events.7 #Bonus
		100 = church_estate_events.8
		100 = church_estate_events.9
		100 = church_estate_events.10
		# Dhimmi
		100 = dhimmi_estate_events.1
		400 = dhimmi_estate_events.2 #Demands
		100 = dhimmi_estate_events.3
		100 = dhimmi_estate_events.4
		100 = dhimmi_estate_events.5
		100 = dhimmi_estate_events.6
		400 = dhimmi_estate_events.7 #Disloyal
		100 = dhimmi_estate_events.8
		# Cossacks
		100 = cossack_estate_events.1
		#100 = cossack_estate_events.2 (triggers in neighbor country)
		100 = cossack_estate_events.6
		100 = cossack_estate_events.7
		100 = cossack_estate_events.8
		100 = cossack_estate_events.9
		100 = cossack_estate_events.10
		100 = cossack_estate_events.11
		400 = cossack_estate_events.12 #Disloyal
		100 = cossack_estate_events.13
		400 = cossack_estate_events.14 #Demands
		# Tribes
		100 = tribal_estate_events.1
		100 = tribal_estate_events.2
		100 = tribal_estate_events.3
		100 = tribal_estate_events.4
		100 = tribal_estate_events.5
		100 = tribal_estate_events.6
		100 = tribal_estate_events.7
		100 = tribal_estate_events.8
		100 = tribal_estate_events.9
		150 = tribal_estate_events.11 #Demands
		150 = tribal_estate_events.12 #Demands
		#Remove tribal_estate_events.13
		150 = tribal_estate_events.14 #Demands
		
		1000 = 0              
	}
}

on_five_year_pulse_3 = {
	random_events = {
		100 = propagate_religion_events.1
		100 = propagate_religion_events.2
		100 = propagate_religion_events.3
		100 = propagate_religion_events.4
		100 = propagate_religion_events.5
		100 = propagate_religion_events.6
		100 = propagate_religion_events.8
		100 = propagate_religion_events.9
		100 = propagate_religion_events.10
		#100 = propagate_religion_events.11 #Province event
		1000 = 0
	}
}

on_five_year_pulse_4 = {
}

# El Dorado
on_explore_coast = {
	random_events = {
		10 = exploration_events.1
		10 = exploration_events.2
		10 = exploration_events.3
		10 = exploration_events.4
		10 = exploration_events.5
		10 = exploration_events.6
		10 = exploration_events.7
		10 = exploration_events.8
		10 = exploration_events.9
		10 = exploration_events.10
		10 = exploration_events.11
		10 = exploration_events.12
		10 = exploration_events.13
		10 = exploration_events.14
		10 = exploration_events.15
	}
}
on_conquistador_empty = {
	random_events = {
		10 = seven_cities_events.1
		10 = seven_cities_events.2
		10 = seven_cities_events.3
		10 = seven_cities_events.4
		10 = seven_cities_events.5
		10 = seven_cities_events.6
		10 = seven_cities_events.7
		10 = seven_cities_events.8
		
		10 = seven_cities_events.100
		10 = seven_cities_events.101
		10 = seven_cities_events.102
		10 = seven_cities_events.103
		10 = seven_cities_events.104
		10 = seven_cities_events.105
		
		50 = seven_cities_events.200
		50 = seven_cities_events.201
		50 = seven_cities_events.202
		50 = seven_cities_events.203
		50 = seven_cities_events.204
		50 = seven_cities_events.205
		50 = seven_cities_events.206
		50 = seven_cities_events.207
		50 = seven_cities_events.208
		50 = seven_cities_events.209
		50 = seven_cities_events.210
		50 = seven_cities_events.211
		50 = seven_cities_events.212
		50 = seven_cities_events.213
		50 = seven_cities_events.214
		50 = seven_cities_events.215
		50 = seven_cities_events.216
		50 = seven_cities_events.217
		50 = seven_cities_events.218
		50 = seven_cities_events.219
		50 = seven_cities_events.220
		50 = seven_cities_events.221
		50 = seven_cities_events.222
		50 = seven_cities_events.223
		
		10 = seven_cities_events.302
		10 = seven_cities_events.303
		10 = seven_cities_events.308
		10 = seven_cities_events.309
		
		10 = seven_cities_events.400
		10 = seven_cities_events.401
		10 = seven_cities_events.402
		10 = seven_cities_events.405
		10 = seven_cities_events.406
		10 = seven_cities_events.407
		10 = seven_cities_events.408
		10 = seven_cities_events.409
		10 = seven_cities_events.410
		10 = seven_cities_events.413
		10 = seven_cities_events.414
		
		2000 = 0
	}
}

on_conquistador_native = {
	random_events = {
		10 = seven_cities_events.300
		10 = seven_cities_events.301
		10 = seven_cities_events.303
		10 = seven_cities_events.304
		10 = seven_cities_events.305
		10 = seven_cities_events.306
		10 = seven_cities_events.307
		10 = seven_cities_events.308
		10 = seven_cities_events.309
		10 = seven_cities_events.310
		
		250 = 0
	}
}

on_buy_religious_reform = {
	events = {
		religious_reforms.1
		religious_reforms.2
		religious_reforms.3
	}
}

on_circumnavigation = {
	events = {
		exploration_events.17
		exploration_events.16 #First Circumnavigation Europe
	}
}

on_become_free_city = {
	events = {
		free_cities.1
	}
}

on_remove_free_city = {
	events = {
		free_cities.2
	}
}

on_revoke_estate_land_ai = { #AI can't handle the rebels atm or perform a gradual revoke, sorry
	add_local_autonomy = 100
}

on_revoke_estate_land = {
	if = {
		limit = {
			has_estate = estate_cossacks
			owner = {
				NOT = {
					estate_loyalty = {
						estate = estate_cossacks
						loyalty = 40
					}
				}
			}
		}
		spawn_rebels = {
			type = cossack_rebels
			size = 1
		}
		province_event = { id = cossack_estate_events.15 }
	}
	if = {
		limit = {
			has_estate = estate_dhimmi
			owner = {
				NOT = {
					estate_loyalty = {
						estate = estate_dhimmi
						loyalty = 40
					}
				}
			}
		}
		spawn_rebels = {
			type = religious_rebels
			size = 1
		}
		province_event = { id = dhimmi_estate_events.9 }
	}
	if = {
		limit = {
			has_estate = estate_church
			has_owner_religion = yes
			owner = {
				NOT = {
					estate_loyalty = {
						estate = estate_church
						loyalty = 40
					}
				}
			}
		}
		spawn_rebels = {
			type = religious_rebels
			size = 1
		}
		province_event = { id = church_estate_events.11 }
	}
	if = {
		limit = {
			has_estate = estate_church
			has_owner_religion = no
			owner = {
				NOT = {
					estate_loyalty = {
						estate = estate_church
						loyalty = 40
					}
				}
			}
		}
		spawn_rebels = {
			type = particularist_rebels
			size = 1
		}
		province_event = { id = church_estate_events.11 }
	}
	if = {
		limit = {
			has_estate = estate_nobles
			owner = {
				NOT = {
					estate_loyalty = {
						estate = estate_nobles
						loyalty = 40
					}
				}
			}
		}
		spawn_rebels = {
			type = noble_rebels
			size = 1
		}
		province_event = { id = nobles_estate_events.12 }
	}
	if = {
		limit = {
			has_estate = estate_burghers
			owner = {
				NOT = {
					estate_loyalty = {
						estate = estate_burghers
						loyalty = 40
					}
				}
			}
		}
		spawn_rebels = {
			type = particularist_rebels
			size = 1
		}
		province_event = { id = burghers_estate_events.16 }
	}
	if = {
		limit = {
			has_estate = estate_nomadic_tribes
			owner = {
				NOT = {
					estate_loyalty = {
						estate = estate_nomadic_tribes
						loyalty = 40
					}
				}
			}
		}
		spawn_rebels = {
			type = tribal_rebels
			size = 1
		}
		province_event = { id = tribal_estate_events.10 }
	}
}

on_grant_estate_land = {

}

on_death_has_harem = {
	if = {
		limit = {
			has_heir = no
		}
		country_event = { id = harem_events.2 }
	}
}

on_select_heir_from_harem = {
}

on_fetishist_cult_change = {
	country_event = { id = fetishist_flavor.302 days = 10 } #removing tomb if incompatible cult is picked
	country_event = { id = fetishist_flavor.304 days = 10 } #rebuilding tomb if lost
	if = {
		limit = {
			has_country_flag = lost_ancestral_lands
			NOT = { has_adopted_cult = zanahary_cult }
			NOT = { has_adopted_cult = central_african_ancestor_cult }
		}
		clr_country_flag = lost_ancestral_lands
	}
}

# country
on_gain_great_power_status = {
	if = {
		limit = {
			NOT = { has_country_flag = became_great_power_flag }
		}
		set_country_flag = became_great_power_flag
	}
}

# country
on_lose_great_power_status = {
}

# province
on_province_religion_converted = {
    cu_calc_base_cultural_acceptance = yes
	set_variable = { which = cu_var1 value = -8 }
	cu_add_cultural_acceptance = yes
	#Religion
	 if = {
	        limit = {
			       owner = { 
                           full_idea_group = religious_ideas
				   }
				   religion = owner
				   OR = {
				          NOT = { has_province_flag = recent_converted_money }
						  had_province_flag = {
						        flag = recent_converted_money
								days = 36500
						  }
				   }
				   NOT = { has_province_flag = native_converted_money }
			}
			if = {
			       limit = { 
                          NOT = { development = 4 }
				   }
				   owner = { add_treasury = 8 }
			}
			if = {
			       limit = { 
				          development = 4
                          NOT = { development = 7 }
				   }
				   owner = { add_treasury = 16 }
			}
			if = {
			       limit = { 
				          development = 7
                          NOT = { development = 11 }
				   }
				   owner = { add_treasury = 24 }
			}
			if = {
			       limit = { 
				          development = 11
                          NOT = { development = 14 }
				   }
				   owner = { add_treasury = 32 }
			}
			if = {
			       limit = { 
				          development = 14
                          NOT = { development = 17 }
				   }
				   owner = { add_treasury = 40 }
			}
			if = {
			       limit = { 
				          development = 17
                          NOT = { development = 20 }
				   }
				   owner = { add_treasury = 48 }
			}
			if = {
			       limit = { 
				          development = 20
                          NOT = { development = 23 }
				   }
				   owner = { add_treasury = 56 }
			}
			if = {
			       limit = { 
				          development = 23
                          NOT = { development = 26 }
				   }
				   owner = { add_treasury = 64 }
			}
			if = {
			       limit = { 
				          development = 26
                          NOT = { development = 29 }
				   }
				   owner = { add_treasury = 72 }
			}
			if = {
			       limit = { 
				          development = 29
				   }
				   owner = { add_treasury = 80 }
			}
			clr_province_flag = recent_converted_money
			set_province_flag = recent_converted_money
	 }
	 clr_province_flag = native_converted_money
	 
}

# province
on_province_culture_converted = {
   cu_calc_base_cultural_acceptance = yes
}

# THIS = Province, FROM = Country who Propogated
on_convert_by_trade_policy = {
    cu_calc_base_cultural_acceptance = yes
	if = {
		limit = {
			trade_company_region = trade_company_moluccas
		}
		FROM = {	
			if = {
				limit = {
					ai = no
					NOT = { check_variable = { which = religion_propagated_in_moluccas value = 1 } }
				}
				set_variable = {
					which = religion_propagated_in_moluccas value = 1
				}
			}
			else_if = {
				limit = {
					ai = no
					check_variable = { which = religion_propagated_in_moluccas value = 1 }
					NOT = { check_variable = { which = religion_propagated_in_moluccas value = 6 } }
				}
				change_variable = {
					which = religion_propagated_in_moluccas value = 1
				}
			}
		}
	}
}

# province
# FROM = old owner
on_province_owner_change = {
	set_variable = { which = cabinet_ca which = owner }
	if = {
		limit = { check_variable = { which = p_nationalism value = 1 } }
		cu_calc_nationalism_impact = yes
		cu_convert_nationalism_seperatism = yes
	}
	cu_switch_hybrid_culture = yes
	cu_add_assimilation_policy = yes
    if = { #Initialize 
	      limit = { 
		         NOT = { check_variable = { which = cu_museum_level value = 1 } }
		 }
		 set_variable = { which = cu_museum_level value = 1 }
		 set_variable = { which = cu_art_slot value = 1 }
		 set_variable = { which = cu_art_piece value = 0 }
	}
	if = { 
		limit = { has_province_flag = second_capital_f } 
		clr_province_flag = second_capital_f
		FROM = { clr_country_flag = has_a_second_capital }
	}
	cu_prov_trigger_dist_calc = yes
	if = {  #Revoke Potential Art Transfer
	     limit = {
		        OR = {
				      has_province_flag = art_transfer_dest
					  has_province_flag = art_transfer_source
				}
		 }
		 clr_province_flag = art_transfer_dest
	     clr_province_flag = art_transfer_source
		 FROM = {
		       clr_country_flag = art_transfer_ing
		       every_owned_province = {
			             clr_province_flag = art_transfer_dest
	                     clr_province_flag = art_transfer_source
			   }
		 }
	}
	#Damage local arts
	if = {
	        limit = {
			        NOT = { is_core = owner }
					OR = {
					       NOT = { has_province_flag = recent_art_raid }
						   had_province_flag = {
						            flag = recent_art_raid
									days = 365
						   }
					}
			}
			cu_do_art_damage = yes
	}
	cu_calc_cultural_power_effect = yes
	if = {
	    limit = { local_autonomy = 90 }
		add_local_autonomy = -30
	}
	else_if = {
	    limit = { local_autonomy = 80 }
		add_local_autonomy = -25
	}
	else_if = {
	    limit = { local_autonomy = 70 }
		add_local_autonomy = -20
	}
	else_if = {
	     limit = { local_autonomy = 60 }
		 add_local_autonomy = -10 
	}
	if = { #Prevent province transfer from/to observer
	      limit = {
		        OR = {
				     has_country_flag = cu_observer_country
					 FROM = { has_country_flag = cu_observer_country }
				}
		  }
		  cede_province = FROM
	}
	if = { 
		limit = { 
						NOT = { religion_group = owner } 
						has_building = temple
						NOT = { tolerance_to_this = -3 }
						owner = { ai = yes }
			}
			remove_building = temple
	}
	if = { 
		limit = { 
						NOT = { religion_group = owner } 
						has_building = cathedral
						NOT = { tolerance_to_this = -3 }
			}
			remove_building = cathedral
	}
	clr_province_flag = grant_commercial_privilege
	clr_province_flag = force_enclosure
	clr_province_flag = cu_focus_on_agriculture
	clr_province_flag = cu_benign_neglect_prov
	
	if = {
		limit = { owner = { has_country_modifier = education_policy_church } }
		set_province_flag = education_policy_church_flag
		clr_province_flag = education_policy_public_flag
				if = { 
						limit = { has_building = temple }
						add_province_modifier = {
								name = cu_church_school
								duration = -1
						}
					}
					else_if = { 
						limit = { has_building = cathedral }
						add_province_modifier = {
								name = cu_church_school_2
								duration = -1
						}
					}
	}
	if = {
		limit = { owner = { has_country_modifier = education_policy_burghers } }
		set_province_flag = education_policy_burghers_flag
		clr_province_flag = education_policy_public_flag
				if = { 
						limit = { has_building = public_school }
						add_province_modifier = {
								name = cu_burghers_school
								duration = -1
						}
					}
					if = { 
						limit = { has_building = university }
						add_province_modifier = {
								name = cu_burghers_university
								duration = -1
						}
					}
	}
	else_if = {
		limit = { owner = { has_country_modifier = education_policy_public } }
					set_province_flag = education_policy_public_flag
					clr_province_flag = education_policy_church_flag
					clr_province_flag = education_policy_burghers_flag
					if = { 
						limit = { has_building = public_school }
						add_province_modifier = {
								name = cu_public_school
								duration = -1
						}
					}
					if = { 
						limit = { has_building = university }
						add_province_modifier = {
								name = cu_public_university
								duration = -1
						}
					}
	}
	if = {
		limit = {
				owner = { expansion_ideas = 2 }
				NOT = { development = 15 }
		}
				add_province_modifier = {
						name = cu_colonial_influx
						duration = 18250
				}
	}
	if = {
		limit = {
				owner = { quantity_ideas = 5 }
				OR = {
						has_building = road_1
						has_building = road_2
						has_building = road_3
				}
		}
				add_province_modifier = {
						name = quantity_ideas_5_mod
						duration = -1
				}
	}
	else = {
		remove_province_modifier = quantity_ideas_5_mod
	}
	if = {  
		limit = { 
			owner = {  
					any_owned_province = { 
							culture = ROOT 
							has_province_modifier = cu_culture_understanding
											}
					}
				}	
		add_province_modifier = {
							name = cu_culture_understanding
							duration = 7300
								}				   			
		}
	if = {
		limit = {
				owner = { defensive_ideas = 4 }
				OR = {
						has_building = fort_15th
						has_building = fort_16th
						has_building = fort_17th
						has_building = fort_18th
				}
				NOT = { has_building = courthouse }
				NOT = { has_building = town_hall }
				
		}
		add_province_modifier = {
						name = cu_fort_government
						duration = -1
				}
	}
	else = {
		remove_province_modifier = cu_fort_government
	}

	#China Empire
	if = {
		limit = { 
			owner = { is_emperor_of_china = yes }
			culture_group = east_asian
			OR = {
				region = south_china_region
				region = xinan_region
				region = north_china_region
			}
		}
		if = {
			limit = { owner = { has_country_modifier = yuan_system_in_china } }
			add_province_modifier = { name = yuan_tax_farming duration = -1 }
		}
		else_if = {
			limit = { owner = { has_country_modifier = qing_system_in_china } }
			add_province_modifier = { name = pigtail_or_death duration = 3650 }
		}
	}
	

	# Remove trade company
		clr_province_flag = east_africa_company_local
		clr_province_flag = india_company_local
		clr_province_flag = indochina_company_local
		clr_province_flag = indonesia_company_local
		clr_province_flag = china_company_local
		clr_province_flag = japan_korea_company_local
		clr_province_flag = persia_company_local
		clr_province_flag = west_africa_company_local
		clr_province_flag = south_africa_company_local
		clr_province_flag = east_africa_company_local 
		remove_province_modifier = trade_company_off_1
		remove_province_modifier = trade_company_off_2
		remove_province_modifier = trade_company_off_3
		remove_province_modifier = trade_company_off_4
		remove_province_modifier = trade_company_pri_1
		remove_province_modifier = trade_company_pri_2
		remove_province_modifier = trade_company_pri_3
		remove_province_modifier = trade_company_pri_4				 
	 
	#AI will grant 100% autonomy to foreign provinces if governance capacity is too low
	if = {
		limit = { 
			owner = { 
				ai = yes
				check_variable = { which = go value = 140 } 
			} 
			NOT = { is_core = owner }
			has_owner_culture = no
		}
		add_local_autonomy = 100
	}
	if = { #AI Russian Immigration to steppe province
		limit = {
				owner = {
					OR = {
							tag = MOS
							tag = RUS
							total_development = 800
					}
					ai = yes
					manpower = 2
					mil_power = 20
					any_owned_province = {
						has_owner_culture = yes
						OR = {
							cu_not_terr_trigger = yes
							is_overseas = no
						}
						base_manpower = 2
						check_variable = { which = food_sur value = 6 }
					}
				}
				OR = {
					NOT = { development = 10 }
					has_terrain = steppe
				}
				OR = {
							cu_not_terr_trigger = yes
							is_overseas = no
				}
		}
		owner = {
				add_manpower = -2
				add_mil_power = -20
		}
		add_province_modifier = {
					name = cu_immigration
					duration = -1
			}
			hidden_effect = {
					if = {
						limit = {
						NOT = { check_variable = { which = p_as value = 0 } }
						}
						set_variable = { which = p_as value = 0 }
						cu_check_cultural_assimilation = yes
					}	
			}
	}

	#Core Effects
	if = {
		limit = {
			OR = { 
			    NOT = { check_variable = { which = p_ca value = 30 } }
				AND = {
				       NOT = { culture = FROM }
					   NOT = { religion = FROM }
					   NOT = { check_variable = { which = p_ca value = 50 } }
				}
			}
		}
		remove_core = FROM
	}
	#Add province core and recalculate Administrative Integrity, one day delay for vanilla engine setup
	province_event = { id = govstart.253 days = 1 }
		
	events = {
		japan.1
	}

}

# country
on_parliament_debate_failed = {
      add_corruption = 3
      add_country_modifier = {
	        name = cu_parliament_debate_failed
			duration = 3650
	  }
}

# country
on_parliament_debate_succeeded = {
    add_absolutism = -5
}

# country
on_harmonized_pagan = {
	events = {
		confucian_events.1
	}
}
on_harmonized_christian = {
	events = {
		confucian_events.2
	}
}
on_harmonized_muslim = {
	events = {
		confucian_events.3
	}
}
on_harmonized_jewish_group = {
	events = {
		confucian_events.5
	}
}
on_harmonized_zoroastrian_group = {
	events = {
		confucian_events.6
	}
}
on_harmonized_dharmic = {
	events = {
		confucian_events.4
	}
}
on_harmonized_mahayana = {
	events = {
		confucian_events.9
	}
}
on_harmonized_buddhism = { #Theravada
	events = {
		confucian_events.8
	}	
}
on_harmonized_shinto = {
	events = {
		confucian_events.7
	}
}
on_harmonized_vajrayana = {
	events = {
		confucian_events.10
	}
}

# country
on_russian_sudebnik = {

}

# country
on_russian_oprichnina = {

}

# country
on_russian_streltsy = {

}

# province
on_consecrate_patriarch = {
}

# country. from = overlord
on_accept_tribute = {
}

# country. from = overlord
on_refuse_tribute = {
}

# country
on_leader_recruited = {
}

# country
on_general_recruited = {
	add_army_professionalism = 0.01
}

# country
on_admiral_recruited = {
}

# country
on_conquistador_recruited = {
}

# country
on_explorer_recruited = {
}

# THIS = Province, FROM = Country
on_regiment_recruited = {
	
}

# THIS = Province, FROM = Country
on_mercenary_recruited = {
	FROM = {
		add_army_professionalism = -0.0015
	}
}

# THIS = One province in the state
on_add_pasha = {
}

# THIS = One province in the state
on_remove_pasha = {
	hidden_effect = {
		owner = {
			save_event_target_as = province_owner
		}
		remove_province_modifier = pasha_removed_modifier
	}

	area = {
		limit = { owned_by = event_target:province_owner }
		add_or_extend_province_modifier_effect = { MODIFIER = pasha_removed_modifier DURATION = 3650 }
		set_variable = { which = cu_var1 value = -5 }
	    cu_add_cultural_acceptance = yes
	}
}

# THIS = Province
on_janissaries_raised = {
}

on_reform_enacted = {
}

on_reform_changed = {
}

on_trade_company_investment = {
}

on_center_of_trade_upgrade = {
	add_center_of_trade_level = -1
	province_event = { id = urban.201 }
}

on_center_of_trade_downgrade = {

}

on_culture_promoted = {

}
# FROM = Previous Country, ROOT = Province
on_company_chartered = {
	if = {
		limit = {
			OR = {
				region = bengal_region
				region = hindusthan_region
				region = west_india_region
				region = deccan_region
				region = coromandel_region
			}
		}
		ROOT = {
			owner = {
				set_country_flag = the_coin_is_stronger_than_the_sword
			}
		}
	}
}

# ROOT = Overlord, FROM = Minor
on_dependency_gained = {
	events = {
		dutch_republic.31 # States General falls under a PU
	}
}

# ROOT = Overlord, FROM = Minor
on_dependency_lost = {

}

# ROOT = New vassal, FROM = Overlord
on_create_vassal = {
	if = {
		limit = {
			tag = PAP
		}
		change_government = theocracy
		add_government_reform = papacy_reform
		adopt_reform_progress = FROM
	}
	cu_correct_year = yes
	cu_calc_country_dist = yes
	cu_calc_country_absolute_dist = yes	
}

# ROOT = Country establishing it
# First province in state is set
on_holy_order_established = {

}

# When a minority is expelled to a colony
# THIS = Colony, ROOT = Colony, FROM = Home province
on_minority_expelled = {

}

# THIS = Raiding country, FROM = Sea province
on_raid_coast = {
	if = {
		limit = {
			has_faction = pr_buccaneers
		}
		add_faction_influence = {
			faction = pr_buccaneers
			influence = 1
		}
	}
}

# ROOT = Tag that captured the flagship, FROM = Tag that lost the flagship
on_flagship_captured = {
	FROM = {
		set_country_flag = captured_flagship_country_flag
	}
	ROOT = {
		country_event = { id = flagship_events.2 }
		set_country_flag = trophy_hunter_flag
	}
	FROM = {
		country_event = { id = flagship_events.1 }
	}
}

# ROOT = Tag that destroyed the flagship, FROM = Tag that lost the flagship
on_flagship_destroyed = {
	FROM = {
		set_country_flag = sunk_flagship_country_flag
	}
	ROOT = {
		country_event = { id = flagship_events.4 }
	}
	FROM = {
		country_event = { id = flagship_events.3 }
	}
}

# this = Released country, FROM = Releasing country
on_country_released = {
	if = {
		limit = {
			tag = PAP
		}
		change_government = theocracy
		add_government_reform = papacy_reform
		adopt_reform_progress = FROM
	}
	cu_correct_year = yes
	cu_calc_country_dist = yes
	cu_calc_country_absolute_dist = yes	
}