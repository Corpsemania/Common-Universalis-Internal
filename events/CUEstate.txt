namespace = cuestate
country_event = {
	id = cuestate.0
	title = "cuestate_titl"
	desc = "cuestate_desc"
	picture = COLONIZATION_eventPicture
	hidden = yes
	is_triggered_only = yes
	option = {
		name = "cuestate.a"
		set_variable = { which = etie value = 0 }
		set_variable = { which = etib value = 0 }
		set_variable = { which = etic value = 0 }
		set_variable = { which = etin value = 0 }
		set_variable = { which = etig value = 0 }
		set_variable = { which = t_dev value = 0 }
		clr_country_flag = cu_calc_estates_pause
		set_country_flag = cu_calc_estates_pause
		if = {
			limit = { 
				has_estate = estate_shizu 
				NOT = { has_country_flag = cu_gentrys_landholding_on }
				NOT = { has_country_flag = kill_gentry }
			}
			set_variable = { which = landholding_progress value = 40 }
			set_estate_privilege = gentrys_landholding
			set_country_flag = cu_gentrys_landholding_on
		}
		if = {
			limit = { 
				NOT = { has_estate_privilege = tribal_land }
			}
			set_estate_privilege = tribal_land
		}
		if = { 
			limit = { NOT = { has_country_flag = cu_estate_system_set } } 
			set_variable = { which = cu_var2 value = 0 }
			export_to_variable = {
				which = cu_var2
				value = modifier:yearly_corruption
			}
			change_variable = { which = cu_var2 value = -5 }
			divide_variable = { which = cu_var2 value = 0.05 }
			while = {
				limit = { check_variable = { which = cu_var2 value = 0.1 } }
				add_corruption = 0.1
				subtract_variable = { which = cu_var2 value = 0.1 }
			}
			set_variable = { which = cu_var2 value = 0 }
			export_to_variable = {
				which = cu_var2
				value = modifier:monthly_militarized_society
			}
			divide_variable = { which = cu_var2 value = 0.02 }
			while = {
				limit = { check_variable = { which = cu_var2 value = 1 } }
				add_militarised_society = 1
				subtract_variable = { which = cu_var2 value = 1 }
			}
			set_variable = { which = cu_var2 value = 0 }
		}#Corruption and Authority Set
		if = { #Prevent from stack overflow
			limit = {
				num_of_provinces_in_states = 400
			}
			set_variable = { which = cu_city_num value = 0 }
			export_to_variable = {
				which = cu_city_num
				value = trigger_value:num_of_provinces_in_states
			}
			country_event = { id = cuestate.04 } #Continue Loop
		}
		else = {
			every_owned_province = {
				limit = { 
					is_state = yes 
					#is_state_core = yes
				}
				province_event = { id = cuestate.01 }
				if = {
					limit = { owner = { NOT = { has_country_flag = cu_estate_system_set } } }
					province_event = { id = cuestate.03 days = 1 }#Autonomy Set
				}
			}
			set_country_flag = cu_estate_system_set
			country_event = { id = cuestate.02 }
		}
	}
}
country_event = {
	id = cuestate.04
	title = "cuestate_titl"
	desc = "cuestate_desc"
	picture = COLONIZATION_eventPicture
	hidden = yes
	is_triggered_only = yes
	option = {
		if = {
			limit = { check_variable = { which = cu_city_num value = 200 } }
			set_variable = { which = cu_var1 value = 200 }
			subtract_variable = { which = cu_city_num value = 200 }
			while = {
				limit = { check_variable = { which = cu_var1 value = 0 } }
				random_owned_province = {
					limit = { 
						NOT = { has_province_flag = had_calc } 
						is_state = yes 
						#is_state_core = yes
					}
					province_event = { id = cuestate.01 }
					if = {
						limit = { owner = { NOT = { has_country_flag = cu_estate_system_set } } }
						province_event = { id = cuestate.03 days = 1 }
					}
					set_province_flag = had_calc
				}
				change_variable = { which = cu_var1 value = -1 }
			}
			
			country_event = { id = cuestate.04 } #Continue Loop
		}
		else = {
			every_owned_province = {
				limit = { 
					NOT = { has_province_flag = had_calc } 
					is_state = yes 
					#is_state_core = yes
				}
				province_event = { id = cuestate.01 }
				if = {
					limit = { owner = { NOT = { has_country_flag = cu_estate_system_set } } }
					province_event = { id = cuestate.03 days = 1 }
				}
			}
			every_owned_province = {
				limit = { has_province_flag = had_calc }
				clr_province_flag = had_calc
			}
			if = { 
				limit = { NOT = { has_country_flag = cu_estate_system_set } } 
				set_country_flag = cu_estate_system_set
			}#Autonomy Set
			country_event = { id = cuestate.02 }
		}
	}
}
province_event = {				#because of bugs there will use two events
	id = cuestate.01
	title = "cuestate_titl"
	desc = "cuestate_desc"
	picture = COLONIZATION_eventPicture
	hidden = yes
	is_triggered_only = yes
	option = {
		if = {
			limit = { 
				is_state = yes
				#is_state_core = owner
			}
			clr_province_flag = has_estate_nobles
			clr_province_flag = has_estate_church
			clr_province_flag = has_estate_nomadic_tribes
			clr_province_flag = has_estate_burghers
			clr_province_flag = has_estate_shizu
			clr_province_flag = has_estate_qinwang
			remove_province_modifier = nobles_estate_high_loyalty
			remove_province_modifier = nobles_estate_mid_loyalty 
			remove_province_modifier = nobles_estate_low_loyalty 
			remove_province_modifier = church_estate_high_loyalty 
			remove_province_modifier = church_estate_mid_loyalty
			remove_province_modifier = church_estate_low_loyalty
			remove_province_modifier = tribes_estate_high_loyalty 
			remove_province_modifier = tribes_estate_mid_loyalty 
			remove_province_modifier = tribes_estate_low_loyalty 
			remove_province_modifier = burghers_estate_high_loyalty 
			remove_province_modifier = burghers_estate_mid_loyalty 
			remove_province_modifier = burghers_estate_low_loyalty 
			remove_province_modifier = qinwang_estate_high_loyalty 
			remove_province_modifier = qinwang_estate_mid_loyalty
			remove_province_modifier = qinwang_estate_low_loyalty
			remove_province_modifier = shizu_estate_high_loyalty
			remove_province_modifier = shizu_estate_mid_loyalty
			remove_province_modifier = shizu_estate_low_loyalty
			#set_variable = { which = epimbb which = epimb } #For later update WIP
			#set_variable = { which = epimcb which = epimc }
			#set_variable = { which = epimnb which = epimn }
			#set_variable = { which = epimeb which = epime }
			#set_variable = { which = epimgb which = epimg }
			#set_variable = { which = epimbg value = 0 }
			#set_variable = { which = epimcg value = 0 }
			#set_variable = { which = epimng value = 0 }
			#set_variable = { which = epimeg value = 0 }
			#set_variable = { which = epimgg value = 0 }
			set_variable = { which = epimb value = 0 }
			set_variable = { which = epimc value = 0 }
			set_variable = { which = epimn value = 0 }
			set_variable = { which = epime value = 0 }
			set_variable = { which = epimg value = 0 }
			set_variable = { which = p_dev value = 0 }
			export_to_variable = {
				which = p_dev
				value = development
			}
				#For estates
					set_variable = { which = epim value = 5 }#Estate Influnce Modifier
					#Calc Start
						if = { 
							limit = { owner = { ai = yes } } 
							change_variable = { which = epim value = -2 } 
						}
						if = { 
							limit = { is_capital = yes } 
							change_variable = { which = epim value = -5 } 
						}
						if = { 
							limit = { has_province_modifier = cu_lower_estate_influence } 
							change_variable = { which = epim value = -5 } 
						}
						if = { 
							limit = { has_province_modifier = inspection_tour_local } 
							change_variable = { which = epim value = -1 } 
						}
						if = { 
							limit = { NOT = { owner = { ADM = 3 } } } 
							change_variable = { which = epim value = 2 } 
						}
						if = { 
							limit = { owner = { ADM = 4 }  } 
							change_variable = { which = epim value = -1 } 
						}
						if = { 
							limit = { owner = { ADM = 5 }  } 
							change_variable = { which = epim value = -2 } 
						}
						if = { 
							limit = { owner = { legitimacy_equivalent = 95 } } 
							change_variable = { which = epim value = -1 } 
						}
						if = { 
							limit = { owner = { NOT = { legitimacy_equivalent = 75 } } } 
							change_variable = { which = epim value = 1 } 
						}	
						if = { 
							limit = { owner = { NOT = { legitimacy_equivalent = 55 } } } 
							change_variable = { which = epim value = 1 } 
						}
						if = { 
							limit = { owner = { NOT = { legitimacy_equivalent = 35 } } } 
							change_variable = { which = epim value = 2 } 
						}
						set_variable = { which = cu_var2 value = 0 }
						#estate_burghers 
						if = { 
							limit = { owner = { has_estate = estate_burghers } }
							set_variable = { which = cu_var1 value = 0 }
							set_variable = { which = cu_var2 value = 0 }
							set_variable = { which = cu_var3 value = 0 }
							export_to_variable = {
								which = cu_var2
								value = base_tax
							}
							export_to_variable = {
								which = cu_var3
								value = base_production
							}
							change_variable = { which = cu_var2 which = cu_var3 }
							divide_variable = { which = cu_var2 which = p_dev }
							multiply_variable = { which = cu_var2 value = 100 }
							change_variable = { which = epimb which = epim }
							if = { limit = { owner = { has_country_modifier = trade_limitation } } change_variable = { which = epimb value = -16 } }
							if = { 
								limit = { owner = { OR = { has_reform = free_city has_reform = merchants_reform has_reform = trading_city } } } 
								multiply_variable = { which = epimb value = 5 }
							}
							change_variable = { which = epimb which = cu_var2 }
							change_variable = { which = cu_var1 which = literacy }
							multiply_variable = { which = cu_var1 value = 0.8 }
							change_variable = { which = epimb which = cu_var1 }
							if = { limit = { province_has_center_of_trade_of_level = 3 }  change_variable = { which = epimb value = 32 } }
							else_if = { limit = { province_has_center_of_trade_of_level = 2 }  change_variable = { which = epimb value = 16 } }
							else_if = { limit = { province_has_center_of_trade_of_level = 1 }  change_variable = { which = epimb value = 8 } }
							if = { limit = { has_province_modifier = new_estate_rise_b }  change_variable = { which = epimb value = 50 } }
							if = { limit = { has_province_flag = cu_hlr_former_member_fre }  change_variable = { which = epimb value = 20 } }
							if = { limit = { owner = { OR = { has_reform = burghers_election has_reform = universal_suffrage } } } multiply_variable = { which = epimb value = 1.05 } }
							if = { limit = { owner = { has_country_modifier = artisan_regulation } } multiply_variable = { which = epimb value = 0.88 } }
							if = { limit = { has_province_modifier = nomadic_lifestyle } multiply_variable = { which = epimb value = 0.7 } }
							if = { limit = { has_province_modifier = migratory_agricultural_lifestyle } multiply_variable = { which = epimb value = 0.8 } }
							if = { limit = { has_province_modifier = settled_agricultural_lifestyle } multiply_variable = { which = epimb value = 0.9 } }
							if = {
								limit = {
									NOT = {
										development = 10
									}
								}
								multiply_variable = { which = epimb value = 0.5 }
							}
							if = { limit = { NOT = { check_variable = { which = epimb value = 0 } } } set_variable = { which = epimb value = 1 } }
						}
						#estate_church
						if = { 
							limit = { owner = { OR = { has_estate = estate_shizu has_estate = estate_church } } }
							set_variable = { which = cu_var1 value = 0 }
							set_variable = { which = cu_var2 value = 0 }
							set_variable = { which = cu_var3 value = 0 }
							export_to_variable = {
								which = cu_var3
								value = tolerance_to_this
							}
							if = { limit = { has_building = temple } multiply_variable = { which = cu_var3 value = 3 } }
							else_if = { limit = { has_building = cathedral } multiply_variable = { which = cu_var3 value = 3.5 } }
							else = { multiply_variable = { which = cu_var3 value = 2.5 } }
							change_variable = { which = cu_var2 which = cu_var3 }
							change_variable = { which = epimc which = epim }
							change_variable = { which = epimc which = cu_var2 }
							if = { 
								limit = { owner = { has_estate = estate_shizu has_estate_privilege = gentrys_landholding  } } 
								export_to_variable = {
									which = cu_var2
									value = base_manpower
								}
								divide_variable = { which = cu_var2 which = p_dev }
								if = {
									limit = { owner = { has_country_modifier = measuring_land } }
									multiply_variable = { which = cu_var2 value = 0.8 }
								}
								set_variable = { which = landholding_progress which = owner }
								multiply_variable = { which = cu_var2 which = landholding_progress }
								multiply_variable = { which = cu_var2 which = landholding_progress }
								divide_variable = { which = cu_var2 value = 64 }
								change_variable = { which = epimc which = cu_var2 } 
								if = { limit = { has_province_modifier = migratory_agricultural_lifestyle } multiply_variable = { which = epimc value = 1.05 } }
								if = { limit = { has_province_modifier = settled_agricultural_lifestyle } multiply_variable = { which = epimc value = 1.1 } }
							}
							else = { if = { limit = { has_province_modifier = settled_agricultural_lifestyle } multiply_variable = { which = epimn value = 1.05 } } }
							if = { limit = { owner = { government = theocracy } } change_variable = { which = epimc value = 35 } }
							if = { limit = { owner = { has_reform = divine_law } } change_variable = { which = epimc value = 1.5 } }
							if = { limit = { owner = { religion = catholic } } change_variable = { which = epimc value = 8 } }
							if = { limit = { owner = { religion = orthodox } } change_variable = { which = epimc value = 4 } }
							if = { limit = { owner = { religion_group = muslim } } change_variable = { which = epimc value = 2 } }
							set_variable = { which = cu_var1 value = 100 }
							subtract_variable = { which = cu_var1 which = literacy }
							multiply_variable = { which = cu_var1 value = 0.3 }
							change_variable = { which = epimc which = cu_var1 }
							if = { limit = { has_province_modifier = new_estate_rise_c }  change_variable = { which = epimc value = 50 } }
							if = { limit = { has_province_flag = cu_hlr_former_member_the }  change_variable = { which = epimc value = 20 } }
							if = { limit = { owner = { has_reform = elective_monarchy } }  multiply_variable = { which = epimc value = 1.05 } }
							if = { limit = { has_province_modifier = industrial_lifestyle } multiply_variable = { which = epimc value = 0.8 } }
							if = { limit = { owner = { OR = { has_reform = noble_election has_reform = universal_suffrage } } } multiply_variable = { which = epimc value = 0.95 } }
							if = { limit = { NOT = { check_variable = { which = epimc value = 0 } } } set_variable = { which = epimc value = 1 } }
						}
						#estate_nobles
						if = { 
							limit = { owner = { OR = { has_estate = estate_qinwang has_estate = estate_nobles } } }
							set_variable = { which = cu_var1 value = 0 }
							set_variable = { which = cu_var2 value = 0 }
							set_variable = { which = cu_var3 value = 0 }
							export_to_variable = {
								which = cu_var2
								value = base_manpower
							}
							divide_variable = { which = cu_var2 which = p_dev }
							multiply_variable = { which = cu_var2 value = 100 }
							if = { limit = { owner = { government = republic } } change_variable = { which = cu_var3 value = -5 } }
							if = { limit = { owner = { government = monarchy } } change_variable = { which = cu_var3 value = 7 } }
							if = { limit = { owner = { has_reform = cu_feudalism_reform } } change_variable = { which = cu_var3 value = 5 } }
							if = { limit = { OR = { has_building = fort_15th has_building = fort_16th has_building = fort_17th has_building = fort_18th } } change_variable = { which = cu_var3 value = 10 } }
							if = { limit = { OR = { has_province_modifier = mamluks_corruption } } change_variable = { which = cu_var3 value = 33 } } 
							change_variable = { which = cu_var2 which = cu_var3 }
							change_variable = { which = epimn which = epim }
							if = { limit = { has_province_modifier = new_estate_rise_n }  change_variable = { which = epimn value = 50 } }
							if = { limit = { has_province_flag = cu_hlr_former_member_els }  change_variable = { which = epimn value = 20 } }
							if = { limit = { owner = { has_country_modifier = start_of_circle } } change_variable = { which = epimn value = 75 } }
							change_variable = { which = epimn which = cu_var2 }
							if = { limit = { owner = { has_reform = elective_monarchy } }  multiply_variable = { which = epimn value = 1.05 } }
							if = { limit = { owner = { has_estate = estate_qinwang } } multiply_variable = { which = epimn value = 0.75 } }
							if = { limit = { has_province_modifier = migratory_agricultural_lifestyle } multiply_variable = { which = epimn value = 1.05 } }
							if = { limit = { has_province_modifier = settled_agricultural_lifestyle } multiply_variable = { which = epimn value = 1.1 } }
							if = { limit = { has_province_modifier = industrial_lifestyle } multiply_variable = { which = epimn value = 0.9 } }
							if = { limit = { owner = { OR = { has_reform = burghers_election has_reform = universal_suffrage } } } multiply_variable = { which = epimn value = 0.95 } }
							if = { limit = { NOT = { check_variable = { which = epimn value = 0 } } } set_variable = { which = epimn value = 1 } }
						}
						#estate_nomadic_tribes
						if = { 
							limit = { owner = { has_estate = estate_nomadic_tribes }  }
							set_variable = { which = cu_var1 value = 0 }
							set_variable = { which = cu_var2 value = 0 }
							set_variable = { which = cu_var3 value = 0 }
							export_to_variable = {
								which = cu_var2
								value = development
							}
							multiply_variable = { which = cu_var2 value = -1.2 }
							set_variable = { which = epime which = epim }
							if = { limit = { government = tribal } change_variable = { which = epime value = 50 } }
							else_if = { 
								limit = {
									has_terrain = steppe
									unit_type = eastern
								} 
								change_variable = { which = epime value = 40 }
							}
							else_if = { 
								limit = {
									has_province_modifier = tusi_administration
								} 
								change_variable = { which = epime value = 35 }
							}
							else = {
								change_variable = { which = epime value = -10 }
							}
							if = { limit = { has_province_modifier = new_estate_rise_e }  change_variable = { which = epime value = 50 } }
							change_variable = { which = epime which = cu_var2 }
							if = { limit = { owner = { has_reform = steppe_empire } } change_variable = { which = epime value = -25 } }
							change_variable = { which = cu_var1 value = 40 }
							subtract_variable = { which = cu_var1 which = literacy }
							change_variable = { which = epime which = cu_var1 }
							if = { limit = { owner = { has_reform = elective_monarchy } }  multiply_variable = { which = epime value = 1.1 } }
							if = { limit = { has_province_modifier = migratory_agricultural_lifestyle } multiply_variable = { which = epimb value = 1.3 } }
							if = { limit = { has_province_modifier = nomadic_lifestyle } multiply_variable = { which = epimb value = 1.5 } }
							if = { limit = { has_province_modifier = settled_agricultural_lifestyle } multiply_variable = { which = epimb value = 0.8 } }
							if = { limit = { has_province_modifier = pre_industrial_lifestyle } multiply_variable = { which = epimb value = 0.4 } }
							if = { limit = { has_province_modifier = industrial_lifestyle } multiply_variable = { which = epimb value = 0 } }
							if = { limit = { NOT = { check_variable = { which = epime value = 0 } } } set_variable = { which = epime value = 1 } }
						}
				#For government
					set_variable = { which = epimg value = 12.5 }
					#Calc Start
						if = { 
							limit = { is_capital = yes } 
							change_variable = { which = epimg value = 256 } 
						}
						if = { 
							limit = { has_province_modifier = inspection_tour_local } 
							change_variable = { which = epimg value = 1 } 
						}
						if = { 
							limit = { has_province_modifier = cu_lower_estate_influence } 
							change_variable = { which = epimg value = 5 } 
						}
						if = { 
							limit = { NOT = { owner = { ADM = 3 } } } 
							change_variable = { which = epimg value = -2 } 
						}
						else_if = { 
							limit = { NOT = { owner = { ADM = 2 } } } 
							change_variable = { which = epimg value = -4 } 
						}
						if = { 
							limit = { owner = { ADM = 4 }  } 
							change_variable = { which = epimg value = 2 } 
						}
						if = {
						  limit = { owner = { adm_tech = 31 } }
						  change_variable = { which = epimg value = 30 }
						}
						else_if = {
							limit = { owner = { adm_tech = 26 } }
							change_variable = { which = epimg value = 25 }
						}
						else_if = {
							limit = { owner = { adm_tech = 23 } }
							change_variable = { which = epimg value = 20 }
						}
						else_if = {
							limit = { owner = { adm_tech = 18 } }
							change_variable = { which = epimg value = 15 }
						}
						else_if = {
							limit = { owner = { adm_tech = 12 } }
							change_variable = { which = epimg value = 10 }
						}
						else_if = {
							limit = { owner = { adm_tech = 8 } }
							change_variable = { which = epimg value = 5 }
						}
						set_variable = { which = cu_var1 value = 0 }
						set_variable = { which = cu_var2 value = 0 }
						set_variable = { which = cu_var3 value = 0 }
						export_to_variable = {
							which = cu_var1
							value = modifier:administrative_efficiency
							who = owner
						}
						multiply_variable = { which = cu_var1 value = 100 }
						export_to_variable = {
							which = cu_var3
							value = trigger_value:absolutism
							who = owner
						} 
						subtract_variable = { which = cu_var3 value = 30 }
						multiply_variable = { which = cu_var3 value = 0.275 }
						export_to_variable = {
							which = cu_var2
							value = trigger_value:corruption
							who = owner
						} 
						multiply_variable = { which = cu_var2 value = -0.01 }
						change_variable = { which = cu_var2 value = 1 }
						change_variable = { which = epimg which = cu_var1 }
						export_to_variable = {
							which = cu_var1
							value = trigger_value:militarised_society
							who = owner
						}
						multiply_variable = { which = cu_var1 value = 0.125 }
						change_variable = { which = epimg which = cu_var1 }
						change_variable = { which = epimg which = cu_var3 }
						if = { 
							limit = { has_province_modifier = second_capital } 
							multiply_variable = { which = epimg value = 1.5 } 
						}
						if = { limit = { owner = { has_reform = minimum_government_capacity } } change_variable = { which = cu_var2 value = -0.15 } }
						else_if = { limit = { owner = { has_reform = shrink_government_capacity } } change_variable = { which = cu_var2 value = -0.075 } }
						else_if = { limit = { owner = { has_reform = expand_government_capacity } } change_variable = { which = cu_var2 value = 0.075 } }
						else_if = { limit = { owner = { has_reform = maximum_government_capacity } } change_variable = { which = cu_var2 value = 0.15 } }
						if = { limit = { has_building = town_hall } change_variable = { which = cu_var2 value = 0.2 } }
						else_if = { limit = { has_building = courthouse } change_variable = { which = cu_var2 value = 0.1 } }
						if = { limit = { owner = { has_reform = self_governance } } change_variable = { which = cu_var2 value = -0.1 } }
						if = { limit = { has_seat_in_parliament = yes } change_variable = { which = cu_var2 value = 0.125 } }
						if = { limit = { owner = { has_reform = elective_monarchy } }  multiply_variable = { which = epimg value = 0.95 } }
						multiply_variable = { which = epimg which = cu_var2 }
						if = { limit = { NOT = { check_variable = { which = epimg value = 0 } } } set_variable = { which = epimg value = 1 } }
					#TOTAL CALC
						set_variable = { which = cu_var1 value = 0 }
						change_variable = { which = cu_var1 which = epimg }
						change_variable = { which = cu_var1 which = epimn }
						change_variable = { which = cu_var1 which = epimb }
						change_variable = { which = cu_var1 which = epime }
						change_variable = { which = cu_var1 which = epimc }
						multiply_variable = { which = epimg value = 100 }
						multiply_variable = { which = epimb value = 100 }
						multiply_variable = { which = epimc value = 100 }
						multiply_variable = { which = epimn value = 100 }
						multiply_variable = { which = epime value = 100 }
						divide_variable = { which = epimc which = cu_var1 } 
						divide_variable = { which = epime which = cu_var1 } 
						divide_variable = { which = epimn which = cu_var1 } 
						divide_variable = { which = epimb which = cu_var1 } 
						divide_variable = { which = epimg which = cu_var1 }
						if = { 
							limit = { 
								owner = { OR = { has_estate = estate_cossacks has_estate = estate_nomadic_tribes } } 
							} 
							set_variable = { which = cu_var3 value = 0 }
							change_variable = { which = cu_var3 which = epime }
							multiply_variable = { which = cu_var3 which = p_dev } 
							owner = { set_variable = { which = cu_var3 which = PREV } change_variable = { which = etie which = cu_var3 } } 
						}
						if = { 
							limit = { 
								owner = { OR = { has_estate = estate_nobles has_estate = estate_qinwang } } 
							} 
							set_variable = { which = cu_var3 value = 0 }
							change_variable = { which = cu_var3 which = epimn }
							multiply_variable = { which = cu_var3 which = p_dev } 
							owner = { set_variable = { which = cu_var3 which = PREV } change_variable = { which = etin which = cu_var3 } } 
						}
						if = { 
							limit = { 
								owner = { OR = { has_estate = estate_shizu has_estate = estate_church } } 
							} 
							set_variable = { which = cu_var3 value = 0 }
							change_variable = { which = cu_var3 which = epimc }
							multiply_variable = { which = cu_var3 which = p_dev }  
							owner = { set_variable = { which = cu_var3 which = PREV } change_variable = { which = etic which = cu_var3 } } 
						}
						if = { 
							limit = { 
								owner = { has_estate = estate_burghers } 
							} 
							set_variable = { which = cu_var3 value = 0 }
							change_variable = { which = cu_var3 which = epimb }
							multiply_variable = { which = cu_var3 which = p_dev } 
							owner = { set_variable = { which = cu_var3 which = PREV } change_variable = { which = etib which = cu_var3 } } 
						}
						set_variable = { which = cu_var3 value = 0 }
						change_variable = { which = cu_var3 which = epimg }
						multiply_variable = { which = cu_var3 which = p_dev } 
						owner = { set_variable = { which = cu_var3 which = PREV } change_variable = { which = etig which = cu_var3 } } 
						if = {
							limit = {
								AND = {
									check_variable = { which = epimn which = epimb }
									check_variable = { which = epimn which = epimc }
									check_variable = { which = epimn which = epime }
								}
							}
							if = {
								limit = { owner = { has_estate = estate_qinwang } }
								set_province_flag = has_estate_qinwang
								if = { 
									limit = { owner = { estate_loyalty = {	estate = estate_qinwang	loyalty = 60	} }  } 
									add_province_modifier = {
										name = qinwang_estate_high_loyalty
										duration = -1
									}
								}
								else_if = { 
									limit = { owner = { estate_loyalty = {	estate = estate_qinwang	loyalty = 30	} }  } 
									add_province_modifier = {
										name = qinwang_estate_mid_loyalty
										duration = -1
									} 
								}
								else = { 
									add_province_modifier = {
										name = qinwang_estate_low_loyalty
										duration = -1
									}
								}
							}
							else_if = {
								limit = { owner = { has_estate = estate_nobles } }
								set_province_flag = has_estate_nobles
								if = { 
									limit = { owner = { estate_loyalty = {	estate = estate_nobles	loyalty = 60	} }  } 
									add_province_modifier = {
										name = nobles_estate_high_loyalty
										duration = -1
									}
								}
								else_if = { 
									limit = { owner = { estate_loyalty = {	estate = estate_nobles	loyalty = 30	} }  } 
									add_province_modifier = {
										name = nobles_estate_mid_loyalty
										duration = -1
									} 
								}
								else = { 
									add_province_modifier = {
										name = nobles_estate_low_loyalty
										duration = -1
									}
								}
							}
						} 
						else_if = {
							limit = {
								AND = {
									check_variable = { which = epimb which = epimc }
									check_variable = { which = epimb which = epime }
								}
							}
							if = {
								limit = { owner = { has_estate = estate_burghers } }
								set_province_flag = has_estate_burghers
								if = { 
									limit = { owner = { estate_loyalty = {	estate = estate_burghers	loyalty = 60	} }  } 
									add_province_modifier = {
										name = burghers_estate_high_loyalty
										duration = -1
									}
								}
								else_if = { 
									limit = { owner = { estate_loyalty = {	estate = estate_burghers	loyalty = 30	} }  } 
									add_province_modifier = {
										name = burghers_estate_mid_loyalty
										duration = -1
									} 
								}
								else = { 
									add_province_modifier = {
										name = burghers_estate_low_loyalty
										duration = -1
									}
								}
							}
						}
						else_if = {
							limit = {
								check_variable = { which = epimc which = epime }
							}
							if = {
								limit = { owner = { has_estate = estate_shizu } }
								set_province_flag = has_estate_shizu
								if = { 
									limit = { owner = { estate_loyalty = {	estate = estate_shizu	loyalty = 60	} }  } 
									add_province_modifier = {
										name = shizu_estate_high_loyalty
										duration = -1
									}
								}
								else_if = { 
									limit = { owner = { estate_loyalty = {	estate = estate_shizu	loyalty = 30	} }  } 
									add_province_modifier = {
										name = shizu_estate_mid_loyalty
										duration = -1
									} 
								}
								else = { 
									add_province_modifier = {
										name = shizu_estate_low_loyalty
										duration = -1
									}
								}
							}
							
							else_if = {
								limit = { owner = { has_estate = estate_church } }
								set_province_flag = has_estate_church
								if = { 
									limit = { owner = { estate_loyalty = {	estate = estate_church	loyalty = 60	} }  } 
									add_province_modifier = {
										name = church_estate_high_loyalty
										duration = -1
									}
								}
								else_if = { 
									limit = { owner = { estate_loyalty = {	estate = estate_church	loyalty = 30	} }  } 
									add_province_modifier = {
										name = church_estate_mid_loyalty
										duration = -1
									} 
								}
								else = { 
									add_province_modifier = {
										name = church_estate_low_loyalty
										duration = -1
									}
								}
							}
						}
						else = {
							if = {
								limit = { owner = { has_estate = estate_nomadic_tribes } }
								set_province_flag = has_estate_nomadic_tribes
								if = { 
									limit = { owner = { estate_loyalty = {	estate = estate_nomadic_tribes 	loyalty = 60	} }  } 
									add_province_modifier = {
										name = tribes_estate_high_loyalty
										duration = -1
									}
								}
								else_if = { 
									limit = { owner = { estate_loyalty = {	estate = estate_nomadic_tribes	loyalty = 30	} }  } 
									add_province_modifier = {
										name = tribes_estate_mid_loyalty
										duration = -1
									} 
								}
								else = { 
									add_province_modifier = {
										name = tribes_estate_low_loyalty
										duration = -1
									}
								}
							}
						}
		}
	}
}
country_event = {
	id = cuestate.02
	title = "cuestate_titl"
	desc = "cuestate_desc"
	picture = COLONIZATION_eventPicture
	hidden = yes
	is_triggered_only = yes
	option = {
		name = "cuestate.a"
		export_to_variable = {
			which = t_dev
			value = states_development
		}
		divide_variable = { which = etie which = t_dev }
		divide_variable = { which = etib which = t_dev }
		divide_variable = { which = etic which = t_dev }
		divide_variable = { which = etin which = t_dev }
		divide_variable = { which = etig which = t_dev }
		#Temp
		set_variable = { which = etieTemp which = etie }
		set_variable = { which = etibTemp which = etib }
		set_variable = { which = eticTemp which = etic }
		set_variable = { which = etinTemp which = etin }
		set_variable = { which = etigTemp which = etig }
		change_estate_land_share = {
			estate = estate_burghers
			share = -100
		}
		change_estate_land_share = {
			estate = estate_nomadic_tribes
			share = -100
		}
		change_estate_land_share = {
			estate = estate_church
			share = -100
		}
		change_estate_land_share = {
			estate = estate_shizu
			share = -100
		}
		change_estate_land_share = {
			estate = estate_church
			share = -100
		}
		change_estate_land_share = {
			estate = estate_nobles
			share = -100
		}
		change_estate_land_share = {
			estate = estate_qinwang
			share = -100
		}
		change_estate_land_share = {
			estate = estate_government
			share = -100
		}
		while = {
			limit = { check_variable = { which = etieTemp value = 0 } }
			change_variable = {
				which = etieTemp
				value = -0.1
			}
			change_estate_land_share = {
				estate = estate_nomadic_tribes
				share = 0.1
			}
		}
		while = {
			limit = { check_variable = { which = eticTemp value = 0 } }
			change_variable = {
				which = eticTemp
				value = -0.1
			}
			if = {
				limit = {
					has_estate = estate_church
				}
				change_estate_land_share = {
					estate = estate_church
					share = 0.1
				}
			}
			else_if = {
				limit = { has_estate = estate_shizu }
				change_estate_land_share = {
					estate = estate_shizu
					share = 0.1
				}
			}
		}
		while = {
			limit = { check_variable = { which = etinTemp value = 0 } }
			change_variable = {
				which = etinTemp
				value = -0.1
			}
			if = {
				limit = {
					has_estate = estate_nobles
				}
				change_estate_land_share = {
					estate = estate_nobles
					share = 0.1
				}
			}
			else_if = {
				limit = { has_estate = estate_qinwang }
				change_estate_land_share = {
					estate = estate_qinwang
					share = 0.1
				}
			}
		}
		while = {
			limit = { check_variable = { which = etibTemp value = 0 } }
			change_variable = {
				which = etibTemp
				value = -0.1
			}
			change_estate_land_share = {
				estate = estate_burghers
				share = 0.1
			}
		}
		while = {
			limit = { check_variable = { which = etigTemp value = 0 } }
			change_variable = {
				which = etigTemp
				value = -0.1
			}
			change_estate_land_share = {
				estate = estate_government
				share = 0.1
			}
		}
		set_variable = { which = etieTemp value = 0 }
		set_variable = { which = etibTemp value = 0 }
		set_variable = { which = eticTemp value = 0 }
		set_variable = { which = etinTemp value = 0 }
		set_variable = { which = etigTemp value = 0 }
		if = { #Estimate cash/stability point effect for estate interactions
		      limit = { ai = no }
			  GetEstateInteractionCost = yes
		}
		if = {
			limit = {
				has_estate_privilege = gentrys_landholding 
				NOT = { check_variable = { which = landholding_progress  value = 240 } }
			}
			set_variable = { which = landholding_progress_g value = 0 }
			export_to_variable = {
				which = landholding_progress_g	
				value = modifier:yearly_harmony
			}
			multiply_variable = { which = landholding_progress_g value = -1 }
			change_variable = { which = landholding_progress_g value = 1 }
			if = {
				limit = { ai = yes }
				change_variable = { which = landholding_progress_g value = 2.5 }
			}
			change_variable = { which = landholding_progress which = landholding_progress_g }
		}
		if = { limit = { check_variable = { which = landholding_progress  value = 241 } } set_variable = { which = landholding_progress  value = 240 } }
	}
}
province_event = {
	id = cuestate.03
	title = "cuestate_titl"
	desc = "cuestate_desc"
	picture = COLONIZATION_eventPicture
	hidden = yes
	is_triggered_only = yes
	option = {
		name = "cuestate.a"
		set_variable = { which = cu_var2 value = 0 }
		export_to_variable = {
			which = cu_var2
			value = modifier:local_autonomy
		}
		divide_variable = { which = cu_var2 value = 0.005 }
		while = {
			limit = { check_variable = { which = cu_var2 value = 1 } }
			add_local_autonomy = 1
			subtract_variable = { which = cu_var2 value = 1 }
		}
	}
}

country_event = {
	id = cuestate.11
	title = "DEMAND_WAR_SUPPORT"
	desc = "cuestate.11_desc"
	picture = CONQUEST_eventPicture
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			set_variable = { which = cu_cash which = etin } 
			export_to_variable = {
				which = t_dev
				value = states_development
			}
			multiply_variable = { which = cu_cash which = t_dev }
			multiply_variable = { which = cu_cash value = 0.01 }
			multiply_variable = { which = cu_cash value = 0.25 }
			set_variable = { which = cu_cash_display which = cu_cash }				 
		}
	}
	option = {
		name = cuestate.11.a
		custom_tooltip = add_manpower_est
		add_dip_power = -100
		add_absolutism = -10
		hidden_effect = {			
			every_owned_province = {
				limit = { check_variable = { which = epimn value = 30 } }
				owner = { add_manpower = 0.50 }
			}
		}
		add_country_modifier = {
			name = estate_nobles_war_support
			duration = -1
		}
		if = {
			limit = { ai = yes }
			add_country_modifier = {
				name = estate_ai_helper
				duration = 366
			}
		}
		clr_country_flag = demand_war_support_from_nobles
		set_country_flag = demand_war_support_from_nobles
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = cuestate.11.b
		custom_tooltip = cu_add_cash
		add_dip_power = -150
		add_absolutism = -10
		hidden_effect = {
			cu_change_cash = yes
		}
		ai_chance = {
			factor = 0
		}
	}
	option = {
		name = "cugovernmentui.exit"
		ai_chance = {
			factor = 100
		}
	}
}

country_event = {
	id = cuestate.12
	title = "cuestate_titl"
	desc = "cuestate_desc"
	picture = COLONIZATION_eventPicture
	hidden = yes
	trigger = {
		has_country_flag = at_war_bef
		is_at_war = no
	}
	option = {
		name = "cuestate.a"
		clr_country_flag = at_war_bef
		remove_country_modifier = estate_shizu_war_support
		every_owned_province = {
			kill_units = {
				who = owner
				type = estate_shizu_inf_30
			}
			kill_units = {
				who = owner
				type = estate_shizu_inf_20
			}
			kill_units = {
				who = owner
				type = estate_shizu_inf_10
			}
			kill_units = {
				who = owner
				type = estate_shizu_inf_0
			}
		}
		remove_country_modifier = estate_nobles_war_support
		remove_country_modifier = estate_nomadic_tribes_war_support
		remove_country_modifier = estate_church_war_support
		remove_country_modifier = estate_burghers_war_support
	}
}


country_event = {
	id = cuestate.14
	title = "DEMAND_WAR_SUPPORT"
	desc = "cuestate.11_desc"
	picture = CONQUEST_eventPicture
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			set_variable = { which = cu_cash which = etie } 
			export_to_variable = {
				which = t_dev
				value = states_development
			}
			multiply_variable = { which = cu_cash which = t_dev }
			multiply_variable = { which = cu_cash value = 0.01 }
			multiply_variable = { which = cu_cash value = 0.25 }			 
		}
	}
	option = {
		name = cuestate.11.a
		custom_tooltip = add_manpower_est
		add_dip_power = -100
		add_absolutism = -15
		hidden_effect = {
			every_owned_province = {
				limit = { check_variable = { which = epime value = 30 } }
				owner = { add_manpower = 0.33 }
			}
		}
		add_country_modifier = {
			name = estate_nomadic_tribes_war_support
			duration = -1
		}
		if = {
			limit = { ai = yes }
			add_country_modifier = {
				name = estate_ai_helper
				duration = 366
			}
		}
		clr_country_flag = demand_war_support_from_nomadic_tribes
		set_country_flag = demand_war_support_from_nomadic_tribes
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = cuestate.11.b
		custom_tooltip = cu_add_cash
		add_dip_power = -150
		add_absolutism = -5
		hidden_effect = {
			cu_change_cash = yes
		}
		ai_chance = {
			factor = 0
		}
	}
	option = {
		name = "cugovernmentui.exit"
		ai_chance = {
			factor = 100
		}
	}
}
	

province_event = {
	id = cuestate.24#HLR
	title = "cuestate_titl"
	desc = "cuestate_desc"
	picture = COLONIZATION_eventPicture
	hidden = yes
	trigger = {
		OR = {
			has_province_flag = cu_hlr_former_member_els
			has_province_flag = cu_hlr_former_member_fre
			has_province_flag = cu_hlr_former_member_the
		}
		owner = { absolutism = 60 }
		NOT = { local_autonomy = 50 }
	}
	mean_time_to_happen = {
		months = 240
	}
	option = {
		name = "cuestate.a"
		clr_province_flag = cu_hlr_former_member_els
		clr_province_flag = cu_hlr_former_member_fre
		clr_province_flag = cu_hlr_former_member_the
	}
}

country_event = {
	id = cuestate.200
	title = "cuestate.200_titl"
	desc = "cuestate.200_desc"
	picture = MERITOCRACY_eventPicture
	is_triggered_only = yes
	after = {
		clr_country_flag = check_now
	}
	option = {
		name = cuestate.200.a #land taxes reform
		trigger = {
			NOT = { 
				OR = {
					has_country_modifier = revoke_gentrys_previledge
					has_country_modifier = measuring_land
					has_country_modifier = land_tax_reform
				} 
			}
		}
		custom_tooltip = yearly_land_annexiation_decrease_0.5
		add_dip_power = -100
		add_meritocracy = -5
		add_estate_loyalty = {
			estate = estate_shizu
			loyalty = -5
		}
		add_country_modifier = {
			name = land_tax_reform
			duration = 3650
		}
		ai_chance = {
			factor = 0
		}
	}
	option = {
		name = "revoke_gentrys_previledge" #revoke gentry's privileges
		trigger = {
			NOT = { 
				OR = {
					has_country_modifier = revoke_gentrys_previledge
					has_country_modifier = measuring_land
					has_country_modifier = land_tax_reform
				} 
			}
		}
		custom_tooltip = yearly_land_annexiation_decrease_1.5
		add_mil_power = -200
		add_meritocracy = -10
		add_estate_loyalty = {
			estate = estate_shizu
			loyalty = -10
		}
		add_country_modifier = {
			name = revoke_gentrys_previledge
			duration = 3650
		}
		ai_chance = {
			factor = 0
		}
	}
	option = {
		name = "MEASURING_LAND"
		trigger = {
			NOT = { 
				OR = {
					has_country_modifier = revoke_gentrys_previledge
					has_country_modifier = measuring_land
					has_country_modifier = land_tax_reform
				} 
			}
		}
		custom_tooltip = yearly_land_annexiation_decrease_2
		add_adm_power = -150
		add_meritocracy = -15
		add_country_modifier = {
			name = measuring_land
			duration = 3650						
		}
		add_estate_loyalty = {
			estate = estate_shizu
			loyalty = -15
		}
		ai_chance = {
			factor = 0
		}
	}
	option = {
		name = cuestate.200.c #Fuck Them Alllllllllllllllllllllll!
		highlight = yes
		trigger = {
			NOT = { estate_influence = { estate = estate_shizu	influence = 25 } }
			NOT = { check_variable = { which = landholding_progress value = 11  } }
		}
		add_estate_loyalty = {
			estate = estate_shizu
			loyalty = -50
		}
		cu_change_stability_point_n75 = yes
		add_adm_power = -150
		add_dip_power = -150
		add_mil_power = -150
		remove_estate_privilege = gentrys_landholding
		set_country_flag = kill_gentry
		ai_chance = {
			factor = 0
		}
	}
	option = {
		name = "cugovernmentui.exit"
		ai_chance = {
			factor = 100
		}
	}
}